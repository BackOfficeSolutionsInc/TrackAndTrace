@model RadialReview.Controllers.L10Controller.AddRockVm
		   

@Html.SecuredHiddenFor(x => x.RecurrenceId)
	
<div class="form-group @(Model.AvailableRocks.Count()==1?"hidden":"")" >
    <label>Select a rock</label>
	@Html.DropDownListFor(x => x.SelectedRock, Model.AvailableRocks, new { id = "rockSelector", @class = "form-control", placeholder = "Select a rock..." })
</div>
<div class="createNewRock hidden">
    <label>Create a new rock</label>
    @*<div class="row">
        <div class="col-xs-8 col-xs-offset-1">*@
            <div class="contents spinner" style="min-height:40px;"></div>
        @*</div>
    </div>
    <hr/>*@
</div>


<script>
    function Update_AddRock() {
        if ($("#rockSelector").val() == -3) {
            $(".createNewRock").removeClass("hidden");
            var companyRock = "@(Model.AllowCreateCompanyRock?"&companyRock=true":"")";

	        $.ajax({
	            url: "/Rocks/BlankEditorRow?includeUsers=true&excludeDelete=true&recurrenceId=@(Model.RecurrenceId)" + companyRock,
				success:function(data) {
					$(".createNewRock .contents").html(data);
				}
	        });

        } else {
            $(".createNewRock").addClass("hidden");
            $(".createNewRock .contents").html("");
        }
    }

    $(function () {
	    $("#rockSelector").change(function() {
		    Update_AddRock();
	    });
        Update_AddRock();
    });
</script>