@model RadialReview.Models.Interfaces.ICompletable

@{
    var completion = Model.GetCompletion();
}

@if (completion != null)
{
    <div class="progress @(!completion.FullyComplete && !completion.ForceInactive ? "active progress-striped" : "")" style="margin-top: 0px; margin-bottom: 0px;position:relative;">
        @if (!completion.FullyComplete)
        {
            if (completion.TotalRequired > 0)
            {
                <div class="progress-bar @(completion.RequiredComplete ? "progress-bar-primary" : "") @(completion.Illegal ? "progress-bar-warning" : "") pull-left"
                     role="progressbar"
                     aria-valuenow="@(((int)(completion.RequiredPercentage * 100)))"
                     aria-valuemin="0"
                     aria-valuemax="100"
                     style="width: @(((int)(completion.RequiredPercentage * 100)))%; position:absolute;"
                     title="Required: @(((int)(completion.RequiredPercentage * 100)))%@(completion.Illegal ? " (nothing to complete)" : " complete")">
                    <span class="sr-only">@(((int)(completion.RequiredPercentage * 100)))%</span>
                </div>
            }
            if (completion.TotalOptional > 0)
            {
                <div class="progress-bar progress-bar-success @(completion.Illegal ? "progress-bar-warning" : "") pull-left"
                     role="progressbar"
                     aria-valuenow="@((int)(completion.OptionalPercentage * 100))"
                     aria-valuemin="0"
                     aria-valuemax="100"
                     style="width: @((int)(completion.OptionalPercentage * 100))%; position:absolute;"
                     title="Optional: @(((int)(completion.OptionalPercentage * 100)))%@(completion.Illegal ? " (nothing to complete)" : " complete")">
                    <span class="sr-only">@((int)(completion.OptionalPercentage * 100))%</span>
                </div>
            }
        }
        else
        {
            <div class="progress-bar progress-bar-success @(completion.Illegal ? "progress-bar-warning" : "") pull-left"
                 role="progressbar"
                 aria-valuenow="@(completion.Completion)"
                 aria-valuemin="0"
                 aria-valuemax="100"
                 style="width: @(completion.Completion)%; position:absolute;"
                 title="@(completion.Completion)%@(completion.Illegal ? " (nothing to complete)" : " complete")">
                <span class="sr-only">@(completion.Completion)%</span>
            </div>
        }
    </div>

}
else
{
    <!--Completion was null-->
}