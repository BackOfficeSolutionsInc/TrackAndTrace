!function (e) { if ("object" == typeof exports && "undefined" != typeof module) module.exports = e(); else if ("function" == typeof define && define.amd) define('../lib/bullseye', [], e); else { var f; "undefined" != typeof window ? f = window : "undefined" != typeof global ? f = global : "undefined" != typeof self && (f = self), f.bullseye = e() } }(function () {
	var define, module, exports; return (function e(t, n, r) { function s(o, u) { if (!n[o]) { if (!t[o]) { var a = typeof require == "function" && require; if (!u && a) return a(o, !0); if (i) return i(o, !0); var f = new Error("Cannot find module '" + o + "'"); throw f.code = "MODULE_NOT_FOUND", f } var l = n[o] = { exports: {} }; t[o][0].call(l.exports, function (e) { var n = t[o][1][e]; return s(n ? n : e) }, l, l.exports, e, t, n, r) } return n[o].exports } var i = typeof require == "function" && require; for (var o = 0; o < r.length; o++) s(r[o]); return s })({
		1: [function (require, module, exports) {
			'use strict';

			var crossvent = require('crossvent');
			var throttle = require('./throttle');
			var tailormade = require('./tailormade');

			function bullseye(el, target, options) {
				var o = options;
				var domTarget = target && target.tagName;

				if (!domTarget && arguments.length === 2) {
					o = target;
				}
				if (!domTarget) {
					target = el;
				}
				if (!o) { o = {}; }

				var destroyed = false;
				var throttledWrite = throttle(write, 30);
				var tailorOptions = { update: o.autoupdateToCaret !== false && update };
				var tailor = o.caret && tailormade(target, tailorOptions);

				write();

				if (o.tracking !== false) {
					crossvent.add(window, 'resize', throttledWrite);
				}

				return {
					read: readNull,
					refresh: write,
					destroy: destroy,
					sleep: sleep
				};

				function sleep() {
					tailorOptions.sleeping = true;
				}

				function readNull() { return read(); }

				function read(readings) {
					var bounds = target.getBoundingClientRect();
					var scrollTop = document.body.scrollTop || document.documentElement.scrollTop;
					if (tailor) {
						readings = tailor.read();
						return {
							x: (readings.absolute ? 0 : bounds.left) + readings.x,
							y: (readings.absolute ? 0 : bounds.top) + scrollTop + readings.y + 20
						};
					}
					return {
						x: bounds.left,
						y: bounds.top + scrollTop
					};
				}

				function update(readings) {
					write(readings);
				}

				function write(readings) {
					if (destroyed) {
						throw new Error('Bullseye can\'t refresh after being destroyed. Create another instance instead.');
					}
					if (tailor && !readings) {
						tailorOptions.sleeping = false;
						tailor.refresh(); return;
					}
					var p = read(readings);
					if (!tailor && target !== el) {
						p.y += target.offsetHeight;
					}
					el.style.left = p.x + 'px';
					el.style.top = p.y + 'px';
				}

				function destroy() {
					if (tailor) { tailor.destroy(); }
					crossvent.remove(window, 'resize', throttledWrite);
					destroyed = true;
				}
			}

			module.exports = bullseye;

		}, { "./tailormade": 14, "./throttle": 15, "crossvent": 3 }], 2: [function (require, module, exports) {
			(function (global) {

				var NativeCustomEvent = global.CustomEvent;

				function useNative() {
					try {
						var p = new NativeCustomEvent('cat', { detail: { foo: 'bar' } });
						return 'cat' === p.type && 'bar' === p.detail.foo;
					} catch (e) {
					}
					return false;
				}

				/**
				 * Cross-browser `CustomEvent` constructor.
				 *
				 * https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent.CustomEvent
				 *
				 * @public
				 */

				module.exports = useNative() ? NativeCustomEvent :

				// IE >= 9
				'function' === typeof document.createEvent ? function CustomEvent(type, params) {
					var e = document.createEvent('CustomEvent');
					if (params) {
						e.initCustomEvent(type, params.bubbles, params.cancelable, params.detail);
					} else {
						e.initCustomEvent(type, false, false, void 0);
					}
					return e;
				} :

				// IE <= 8
				function CustomEvent(type, params) {
					var e = document.createEventObject();
					e.type = type;
					if (params) {
						e.bubbles = Boolean(params.bubbles);
						e.cancelable = Boolean(params.cancelable);
						e.detail = params.detail;
					} else {
						e.bubbles = false;
						e.cancelable = false;
						e.detail = void 0;
					}
					return e;
				}

			}).call(this, typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
			//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9jcm9zc3ZlbnQvbm9kZV9tb2R1bGVzL2N1c3RvbS1ldmVudC9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIlxudmFyIE5hdGl2ZUN1c3RvbUV2ZW50ID0gZ2xvYmFsLkN1c3RvbUV2ZW50O1xuXG5mdW5jdGlvbiB1c2VOYXRpdmUgKCkge1xuICB0cnkge1xuICAgIHZhciBwID0gbmV3IE5hdGl2ZUN1c3RvbUV2ZW50KCdjYXQnLCB7IGRldGFpbDogeyBmb286ICdiYXInIH0gfSk7XG4gICAgcmV0dXJuICAnY2F0JyA9PT0gcC50eXBlICYmICdiYXInID09PSBwLmRldGFpbC5mb287XG4gIH0gY2F0Y2ggKGUpIHtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogQ3Jvc3MtYnJvd3NlciBgQ3VzdG9tRXZlbnRgIGNvbnN0cnVjdG9yLlxuICpcbiAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9DdXN0b21FdmVudC5DdXN0b21FdmVudFxuICpcbiAqIEBwdWJsaWNcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IHVzZU5hdGl2ZSgpID8gTmF0aXZlQ3VzdG9tRXZlbnQgOlxuXG4vLyBJRSA+PSA5XG4nZnVuY3Rpb24nID09PSB0eXBlb2YgZG9jdW1lbnQuY3JlYXRlRXZlbnQgPyBmdW5jdGlvbiBDdXN0b21FdmVudCAodHlwZSwgcGFyYW1zKSB7XG4gIHZhciBlID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0N1c3RvbUV2ZW50Jyk7XG4gIGlmIChwYXJhbXMpIHtcbiAgICBlLmluaXRDdXN0b21FdmVudCh0eXBlLCBwYXJhbXMuYnViYmxlcywgcGFyYW1zLmNhbmNlbGFibGUsIHBhcmFtcy5kZXRhaWwpO1xuICB9IGVsc2Uge1xuICAgIGUuaW5pdEN1c3RvbUV2ZW50KHR5cGUsIGZhbHNlLCBmYWxzZSwgdm9pZCAwKTtcbiAgfVxuICByZXR1cm4gZTtcbn0gOlxuXG4vLyBJRSA8PSA4XG5mdW5jdGlvbiBDdXN0b21FdmVudCAodHlwZSwgcGFyYW1zKSB7XG4gIHZhciBlID0gZG9jdW1lbnQuY3JlYXRlRXZlbnRPYmplY3QoKTtcbiAgZS50eXBlID0gdHlwZTtcbiAgaWYgKHBhcmFtcykge1xuICAgIGUuYnViYmxlcyA9IEJvb2xlYW4ocGFyYW1zLmJ1YmJsZXMpO1xuICAgIGUuY2FuY2VsYWJsZSA9IEJvb2xlYW4ocGFyYW1zLmNhbmNlbGFibGUpO1xuICAgIGUuZGV0YWlsID0gcGFyYW1zLmRldGFpbDtcbiAgfSBlbHNlIHtcbiAgICBlLmJ1YmJsZXMgPSBmYWxzZTtcbiAgICBlLmNhbmNlbGFibGUgPSBmYWxzZTtcbiAgICBlLmRldGFpbCA9IHZvaWQgMDtcbiAgfVxuICByZXR1cm4gZTtcbn1cbiJdfQ==
		}, {}], 3: [function (require, module, exports) {
			(function (global) {
				'use strict';

				var customEvent = require('custom-event');
				var eventmap = require('./eventmap');
				var doc = document;
				var addEvent = addEventEasy;
				var removeEvent = removeEventEasy;
				var hardCache = [];

				if (!global.addEventListener) {
					addEvent = addEventHard;
					removeEvent = removeEventHard;
				}

				function addEventEasy(el, type, fn, capturing) {
					return el.addEventListener(type, fn, capturing);
				}

				function addEventHard(el, type, fn) {
					return el.attachEvent('on' + type, wrap(el, type, fn));
				}

				function removeEventEasy(el, type, fn, capturing) {
					return el.removeEventListener(type, fn, capturing);
				}

				function removeEventHard(el, type, fn) {
					return el.detachEvent('on' + type, unwrap(el, type, fn));
				}

				function fabricateEvent(el, type, model) {
					var e = eventmap.indexOf(type) === -1 ? makeCustomEvent() : makeClassicEvent();
					if (el.dispatchEvent) {
						el.dispatchEvent(e);
					} else {
						el.fireEvent('on' + type, e);
					}
					function makeClassicEvent() {
						var e;
						if (doc.createEvent) {
							e = doc.createEvent('Event');
							e.initEvent(type, true, true);
						} else if (doc.createEventObject) {
							e = doc.createEventObject();
						}
						return e;
					}
					function makeCustomEvent() {
						return new customEvent(type, { detail: model });
					}
				}

				function wrapperFactory(el, type, fn) {
					return function wrapper(originalEvent) {
						var e = originalEvent || global.event;
						e.target = e.target || e.srcElement;
						e.preventDefault = e.preventDefault || function preventDefault() { e.returnValue = false; };
						e.stopPropagation = e.stopPropagation || function stopPropagation() { e.cancelBubble = true; };
						e.which = e.which || e.keyCode;
						fn.call(el, e);
					};
				}

				function wrap(el, type, fn) {
					var wrapper = unwrap(el, type, fn) || wrapperFactory(el, type, fn);
					hardCache.push({
						wrapper: wrapper,
						element: el,
						type: type,
						fn: fn
					});
					return wrapper;
				}

				function unwrap(el, type, fn) {
					var i = find(el, type, fn);
					if (i) {
						var wrapper = hardCache[i].wrapper;
						hardCache.splice(i, 1); // free up a tad of memory
						return wrapper;
					}
				}

				function find(el, type, fn) {
					var i, item;
					for (i = 0; i < hardCache.length; i++) {
						item = hardCache[i];
						if (item.element === el && item.type === type && item.fn === fn) {
							return i;
						}
					}
				}

				module.exports = {
					add: addEvent,
					remove: removeEvent,
					fabricate: fabricateEvent
				};

			}).call(this, typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
			//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9jcm9zc3ZlbnQvc3JjL2Nyb3NzdmVudC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciBjdXN0b21FdmVudCA9IHJlcXVpcmUoJ2N1c3RvbS1ldmVudCcpO1xudmFyIGV2ZW50bWFwID0gcmVxdWlyZSgnLi9ldmVudG1hcCcpO1xudmFyIGRvYyA9IGRvY3VtZW50O1xudmFyIGFkZEV2ZW50ID0gYWRkRXZlbnRFYXN5O1xudmFyIHJlbW92ZUV2ZW50ID0gcmVtb3ZlRXZlbnRFYXN5O1xudmFyIGhhcmRDYWNoZSA9IFtdO1xuXG5pZiAoIWdsb2JhbC5hZGRFdmVudExpc3RlbmVyKSB7XG4gIGFkZEV2ZW50ID0gYWRkRXZlbnRIYXJkO1xuICByZW1vdmVFdmVudCA9IHJlbW92ZUV2ZW50SGFyZDtcbn1cblxuZnVuY3Rpb24gYWRkRXZlbnRFYXN5IChlbCwgdHlwZSwgZm4sIGNhcHR1cmluZykge1xuICByZXR1cm4gZWwuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBmbiwgY2FwdHVyaW5nKTtcbn1cblxuZnVuY3Rpb24gYWRkRXZlbnRIYXJkIChlbCwgdHlwZSwgZm4pIHtcbiAgcmV0dXJuIGVsLmF0dGFjaEV2ZW50KCdvbicgKyB0eXBlLCB3cmFwKGVsLCB0eXBlLCBmbikpO1xufVxuXG5mdW5jdGlvbiByZW1vdmVFdmVudEVhc3kgKGVsLCB0eXBlLCBmbiwgY2FwdHVyaW5nKSB7XG4gIHJldHVybiBlbC5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGZuLCBjYXB0dXJpbmcpO1xufVxuXG5mdW5jdGlvbiByZW1vdmVFdmVudEhhcmQgKGVsLCB0eXBlLCBmbikge1xuICByZXR1cm4gZWwuZGV0YWNoRXZlbnQoJ29uJyArIHR5cGUsIHVud3JhcChlbCwgdHlwZSwgZm4pKTtcbn1cblxuZnVuY3Rpb24gZmFicmljYXRlRXZlbnQgKGVsLCB0eXBlLCBtb2RlbCkge1xuICB2YXIgZSA9IGV2ZW50bWFwLmluZGV4T2YodHlwZSkgPT09IC0xID8gbWFrZUN1c3RvbUV2ZW50KCkgOiBtYWtlQ2xhc3NpY0V2ZW50KCk7XG4gIGlmIChlbC5kaXNwYXRjaEV2ZW50KSB7XG4gICAgZWwuZGlzcGF0Y2hFdmVudChlKTtcbiAgfSBlbHNlIHtcbiAgICBlbC5maXJlRXZlbnQoJ29uJyArIHR5cGUsIGUpO1xuICB9XG4gIGZ1bmN0aW9uIG1ha2VDbGFzc2ljRXZlbnQgKCkge1xuICAgIHZhciBlO1xuICAgIGlmIChkb2MuY3JlYXRlRXZlbnQpIHtcbiAgICAgIGUgPSBkb2MuY3JlYXRlRXZlbnQoJ0V2ZW50Jyk7XG4gICAgICBlLmluaXRFdmVudCh0eXBlLCB0cnVlLCB0cnVlKTtcbiAgICB9IGVsc2UgaWYgKGRvYy5jcmVhdGVFdmVudE9iamVjdCkge1xuICAgICAgZSA9IGRvYy5jcmVhdGVFdmVudE9iamVjdCgpO1xuICAgIH1cbiAgICByZXR1cm4gZTtcbiAgfVxuICBmdW5jdGlvbiBtYWtlQ3VzdG9tRXZlbnQgKCkge1xuICAgIHJldHVybiBuZXcgY3VzdG9tRXZlbnQodHlwZSwgeyBkZXRhaWw6IG1vZGVsIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIHdyYXBwZXJGYWN0b3J5IChlbCwgdHlwZSwgZm4pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHdyYXBwZXIgKG9yaWdpbmFsRXZlbnQpIHtcbiAgICB2YXIgZSA9IG9yaWdpbmFsRXZlbnQgfHwgZ2xvYmFsLmV2ZW50O1xuICAgIGUudGFyZ2V0ID0gZS50YXJnZXQgfHwgZS5zcmNFbGVtZW50O1xuICAgIGUucHJldmVudERlZmF1bHQgPSBlLnByZXZlbnREZWZhdWx0IHx8IGZ1bmN0aW9uIHByZXZlbnREZWZhdWx0ICgpIHsgZS5yZXR1cm5WYWx1ZSA9IGZhbHNlOyB9O1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uID0gZS5zdG9wUHJvcGFnYXRpb24gfHwgZnVuY3Rpb24gc3RvcFByb3BhZ2F0aW9uICgpIHsgZS5jYW5jZWxCdWJibGUgPSB0cnVlOyB9O1xuICAgIGUud2hpY2ggPSBlLndoaWNoIHx8IGUua2V5Q29kZTtcbiAgICBmbi5jYWxsKGVsLCBlKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gd3JhcCAoZWwsIHR5cGUsIGZuKSB7XG4gIHZhciB3cmFwcGVyID0gdW53cmFwKGVsLCB0eXBlLCBmbikgfHwgd3JhcHBlckZhY3RvcnkoZWwsIHR5cGUsIGZuKTtcbiAgaGFyZENhY2hlLnB1c2goe1xuICAgIHdyYXBwZXI6IHdyYXBwZXIsXG4gICAgZWxlbWVudDogZWwsXG4gICAgdHlwZTogdHlwZSxcbiAgICBmbjogZm5cbiAgfSk7XG4gIHJldHVybiB3cmFwcGVyO1xufVxuXG5mdW5jdGlvbiB1bndyYXAgKGVsLCB0eXBlLCBmbikge1xuICB2YXIgaSA9IGZpbmQoZWwsIHR5cGUsIGZuKTtcbiAgaWYgKGkpIHtcbiAgICB2YXIgd3JhcHBlciA9IGhhcmRDYWNoZVtpXS53cmFwcGVyO1xuICAgIGhhcmRDYWNoZS5zcGxpY2UoaSwgMSk7IC8vIGZyZWUgdXAgYSB0YWQgb2YgbWVtb3J5XG4gICAgcmV0dXJuIHdyYXBwZXI7XG4gIH1cbn1cblxuZnVuY3Rpb24gZmluZCAoZWwsIHR5cGUsIGZuKSB7XG4gIHZhciBpLCBpdGVtO1xuICBmb3IgKGkgPSAwOyBpIDwgaGFyZENhY2hlLmxlbmd0aDsgaSsrKSB7XG4gICAgaXRlbSA9IGhhcmRDYWNoZVtpXTtcbiAgICBpZiAoaXRlbS5lbGVtZW50ID09PSBlbCAmJiBpdGVtLnR5cGUgPT09IHR5cGUgJiYgaXRlbS5mbiA9PT0gZm4pIHtcbiAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgYWRkOiBhZGRFdmVudCxcbiAgcmVtb3ZlOiByZW1vdmVFdmVudCxcbiAgZmFicmljYXRlOiBmYWJyaWNhdGVFdmVudFxufTtcbiJdfQ==
		}, { "./eventmap": 4, "custom-event": 2 }], 4: [function (require, module, exports) {
			(function (global) {
				'use strict';

				var eventmap = [];
				var eventname = '';
				var ron = /^on/;

				for (eventname in global) {
					if (ron.test(eventname)) {
						eventmap.push(eventname.slice(2));
					}
				}

				module.exports = eventmap;

			}).call(this, typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
			//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9jcm9zc3ZlbnQvc3JjL2V2ZW50bWFwLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciBldmVudG1hcCA9IFtdO1xudmFyIGV2ZW50bmFtZSA9ICcnO1xudmFyIHJvbiA9IC9eb24vO1xuXG5mb3IgKGV2ZW50bmFtZSBpbiBnbG9iYWwpIHtcbiAgaWYgKHJvbi50ZXN0KGV2ZW50bmFtZSkpIHtcbiAgICBldmVudG1hcC5wdXNoKGV2ZW50bmFtZS5zbGljZSgyKSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBldmVudG1hcDtcbiJdfQ==
		}, {}], 5: [function (require, module, exports) {
			(function (global) {
				'use strict';

				var getSelection;
				var doc = global.document;
				var getSelectionRaw = require('./getSelectionRaw');
				var getSelectionNullOp = require('./getSelectionNullOp');
				var getSelectionSynthetic = require('./getSelectionSynthetic');
				var isHost = require('./isHost');
				if (isHost.method(global, 'getSelection')) {
					getSelection = getSelectionRaw;
				} else if (typeof doc.selection === 'object' && doc.selection) {
					getSelection = getSelectionSynthetic;
				} else {
					getSelection = getSelectionNullOp;
				}

				module.exports = getSelection;

			}).call(this, typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
			//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9zZWxlY2Npb24vc3JjL2dldFNlbGVjdGlvbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciBnZXRTZWxlY3Rpb247XG52YXIgZG9jID0gZ2xvYmFsLmRvY3VtZW50O1xudmFyIGdldFNlbGVjdGlvblJhdyA9IHJlcXVpcmUoJy4vZ2V0U2VsZWN0aW9uUmF3Jyk7XG52YXIgZ2V0U2VsZWN0aW9uTnVsbE9wID0gcmVxdWlyZSgnLi9nZXRTZWxlY3Rpb25OdWxsT3AnKTtcbnZhciBnZXRTZWxlY3Rpb25TeW50aGV0aWMgPSByZXF1aXJlKCcuL2dldFNlbGVjdGlvblN5bnRoZXRpYycpO1xudmFyIGlzSG9zdCA9IHJlcXVpcmUoJy4vaXNIb3N0Jyk7XG5pZiAoaXNIb3N0Lm1ldGhvZChnbG9iYWwsICdnZXRTZWxlY3Rpb24nKSkge1xuICBnZXRTZWxlY3Rpb24gPSBnZXRTZWxlY3Rpb25SYXc7XG59IGVsc2UgaWYgKHR5cGVvZiBkb2Muc2VsZWN0aW9uID09PSAnb2JqZWN0JyAmJiBkb2Muc2VsZWN0aW9uKSB7XG4gIGdldFNlbGVjdGlvbiA9IGdldFNlbGVjdGlvblN5bnRoZXRpYztcbn0gZWxzZSB7XG4gIGdldFNlbGVjdGlvbiA9IGdldFNlbGVjdGlvbk51bGxPcDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXRTZWxlY3Rpb247XG4iXX0=
		}, { "./getSelectionNullOp": 6, "./getSelectionRaw": 7, "./getSelectionSynthetic": 8, "./isHost": 9 }], 6: [function (require, module, exports) {
			'use strict';

			function noop() { }

			function getSelectionNullOp() {
				return {
					removeAllRanges: noop,
					addRange: noop
				};
			}

			module.exports = getSelectionNullOp;

		}, {}], 7: [function (require, module, exports) {
			(function (global) {
				'use strict';

				function getSelectionRaw() {
					return global.getSelection();
				}

				module.exports = getSelectionRaw;

			}).call(this, typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
			//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9zZWxlY2Npb24vc3JjL2dldFNlbGVjdGlvblJhdy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBnZXRTZWxlY3Rpb25SYXcgKCkge1xuICByZXR1cm4gZ2xvYmFsLmdldFNlbGVjdGlvbigpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGdldFNlbGVjdGlvblJhdztcbiJdfQ==
		}, {}], 8: [function (require, module, exports) {
			(function (global) {
				'use strict';

				var rangeToTextRange = require('./rangeToTextRange');
				var doc = global.document;
				var body = doc.body;
				var GetSelectionProto = GetSelection.prototype;

				function GetSelection(selection) {
					var self = this;
					var range = selection.createRange();

					this._selection = selection;
					this._ranges = [];

					if (selection.type === 'Control') {
						updateControlSelection(self);
					} else if (isTextRange(range)) {
						updateFromTextRange(self, range);
					} else {
						updateEmptySelection(self);
					}
				}

				GetSelectionProto.removeAllRanges = function () {
					var textRange;
					try {
						this._selection.empty();
						if (this._selection.type !== 'None') {
							textRange = body.createTextRange();
							textRange.select();
							this._selection.empty();
						}
					} catch (e) {
					}
					updateEmptySelection(this);
				};

				GetSelectionProto.addRange = function (range) {
					if (this._selection.type === 'Control') {
						addRangeToControlSelection(this, range);
					} else {
						rangeToTextRange(range).select();
						this._ranges[0] = range;
						this.rangeCount = 1;
						this.isCollapsed = this._ranges[0].collapsed;
						updateAnchorAndFocusFromRange(this, range, false);
					}
				};

				GetSelectionProto.setRanges = function (ranges) {
					this.removeAllRanges();
					var rangeCount = ranges.length;
					if (rangeCount > 1) {
						createControlSelection(this, ranges);
					} else if (rangeCount) {
						this.addRange(ranges[0]);
					}
				};

				GetSelectionProto.getRangeAt = function (index) {
					if (index < 0 || index >= this.rangeCount) {
						throw new Error('getRangeAt(): index out of bounds');
					} else {
						return this._ranges[index].cloneRange();
					}
				};

				GetSelectionProto.removeRange = function (range) {
					if (this._selection.type !== 'Control') {
						removeRangeManually(this, range);
						return;
					}
					var controlRange = this._selection.createRange();
					var rangeElement = getSingleElementFromRange(range);
					var newControlRange = body.createControlRange();
					var el;
					var removed = false;
					for (var i = 0, len = controlRange.length; i < len; ++i) {
						el = controlRange.item(i);
						if (el !== rangeElement || removed) {
							newControlRange.add(controlRange.item(i));
						} else {
							removed = true;
						}
					}
					newControlRange.select();
					updateControlSelection(this);
				};

				GetSelectionProto.eachRange = function (fn, returnValue) {
					var i = 0;
					var len = this._ranges.length;
					for (i = 0; i < len; ++i) {
						if (fn(this.getRangeAt(i))) {
							return returnValue;
						}
					}
				};

				GetSelectionProto.getAllRanges = function () {
					var ranges = [];
					this.eachRange(function (range) {
						ranges.push(range);
					});
					return ranges;
				};

				GetSelectionProto.setSingleRange = function (range) {
					this.removeAllRanges();
					this.addRange(range);
				};

				function createControlSelection(sel, ranges) {
					var controlRange = body.createControlRange();
					for (var i = 0, el, len = ranges.length; i < len; ++i) {
						el = getSingleElementFromRange(ranges[i]);
						try {
							controlRange.add(el);
						} catch (e) {
							throw new Error('setRanges(): Element could not be added to control selection');
						}
					}
					controlRange.select();
					updateControlSelection(sel);
				}

				function removeRangeManually(sel, range) {
					var ranges = sel.getAllRanges();
					sel.removeAllRanges();
					for (var i = 0, len = ranges.length; i < len; ++i) {
						if (!isSameRange(range, ranges[i])) {
							sel.addRange(ranges[i]);
						}
					}
					if (!sel.rangeCount) {
						updateEmptySelection(sel);
					}
				}

				function updateAnchorAndFocusFromRange(sel, range) {
					var anchorPrefix = 'start';
					var focusPrefix = 'end';
					sel.anchorNode = range[anchorPrefix + 'Container'];
					sel.anchorOffset = range[anchorPrefix + 'Offset'];
					sel.focusNode = range[focusPrefix + 'Container'];
					sel.focusOffset = range[focusPrefix + 'Offset'];
				}

				function updateEmptySelection(sel) {
					sel.anchorNode = sel.focusNode = null;
					sel.anchorOffset = sel.focusOffset = 0;
					sel.rangeCount = 0;
					sel.isCollapsed = true;
					sel._ranges.length = 0;
				}

				function rangeContainsSingleElement(rangeNodes) {
					if (!rangeNodes.length || rangeNodes[0].nodeType !== 1) {
						return false;
					}
					for (var i = 1, len = rangeNodes.length; i < len; ++i) {
						if (!isAncestorOf(rangeNodes[0], rangeNodes[i])) {
							return false;
						}
					}
					return true;
				}

				function getSingleElementFromRange(range) {
					var nodes = range.getNodes();
					if (!rangeContainsSingleElement(nodes)) {
						throw new Error('getSingleElementFromRange(): range did not consist of a single element');
					}
					return nodes[0];
				}

				function isTextRange(range) {
					return range && range.text !== void 0;
				}

				function updateFromTextRange(sel, range) {
					sel._ranges = [range];
					updateAnchorAndFocusFromRange(sel, range, false);
					sel.rangeCount = 1;
					sel.isCollapsed = range.collapsed;
				}

				function updateControlSelection(sel) {
					sel._ranges.length = 0;
					if (sel._selection.type === 'None') {
						updateEmptySelection(sel);
					} else {
						var controlRange = sel._selection.createRange();
						if (isTextRange(controlRange)) {
							updateFromTextRange(sel, controlRange);
						} else {
							sel.rangeCount = controlRange.length;
							var range;
							for (var i = 0; i < sel.rangeCount; ++i) {
								range = doc.createRange();
								range.selectNode(controlRange.item(i));
								sel._ranges.push(range);
							}
							sel.isCollapsed = sel.rangeCount === 1 && sel._ranges[0].collapsed;
							updateAnchorAndFocusFromRange(sel, sel._ranges[sel.rangeCount - 1], false);
						}
					}
				}

				function addRangeToControlSelection(sel, range) {
					var controlRange = sel._selection.createRange();
					var rangeElement = getSingleElementFromRange(range);
					var newControlRange = body.createControlRange();
					for (var i = 0, len = controlRange.length; i < len; ++i) {
						newControlRange.add(controlRange.item(i));
					}
					try {
						newControlRange.add(rangeElement);
					} catch (e) {
						throw new Error('addRange(): Element could not be added to control selection');
					}
					newControlRange.select();
					updateControlSelection(sel);
				}

				function isSameRange(left, right) {
					return (
					  left.startContainer === right.startContainer &&
					  left.startOffset === right.startOffset &&
					  left.endContainer === right.endContainer &&
					  left.endOffset === right.endOffset
					);
				}

				function isAncestorOf(ancestor, descendant) {
					var node = descendant;
					while (node.parentNode) {
						if (node.parentNode === ancestor) {
							return true;
						}
						node = node.parentNode;
					}
					return false;
				}

				function getSelection() {
					return new GetSelection(global.document.selection);
				}

				module.exports = getSelection;

			}).call(this, typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
			//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9zZWxlY2Npb24vc3JjL2dldFNlbGVjdGlvblN5bnRoZXRpYy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgcmFuZ2VUb1RleHRSYW5nZSA9IHJlcXVpcmUoJy4vcmFuZ2VUb1RleHRSYW5nZScpO1xudmFyIGRvYyA9IGdsb2JhbC5kb2N1bWVudDtcbnZhciBib2R5ID0gZG9jLmJvZHk7XG52YXIgR2V0U2VsZWN0aW9uUHJvdG8gPSBHZXRTZWxlY3Rpb24ucHJvdG90eXBlO1xuXG5mdW5jdGlvbiBHZXRTZWxlY3Rpb24gKHNlbGVjdGlvbikge1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHZhciByYW5nZSA9IHNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpO1xuXG4gIHRoaXMuX3NlbGVjdGlvbiA9IHNlbGVjdGlvbjtcbiAgdGhpcy5fcmFuZ2VzID0gW107XG5cbiAgaWYgKHNlbGVjdGlvbi50eXBlID09PSAnQ29udHJvbCcpIHtcbiAgICB1cGRhdGVDb250cm9sU2VsZWN0aW9uKHNlbGYpO1xuICB9IGVsc2UgaWYgKGlzVGV4dFJhbmdlKHJhbmdlKSkge1xuICAgIHVwZGF0ZUZyb21UZXh0UmFuZ2Uoc2VsZiwgcmFuZ2UpO1xuICB9IGVsc2Uge1xuICAgIHVwZGF0ZUVtcHR5U2VsZWN0aW9uKHNlbGYpO1xuICB9XG59XG5cbkdldFNlbGVjdGlvblByb3RvLnJlbW92ZUFsbFJhbmdlcyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHRleHRSYW5nZTtcbiAgdHJ5IHtcbiAgICB0aGlzLl9zZWxlY3Rpb24uZW1wdHkoKTtcbiAgICBpZiAodGhpcy5fc2VsZWN0aW9uLnR5cGUgIT09ICdOb25lJykge1xuICAgICAgdGV4dFJhbmdlID0gYm9keS5jcmVhdGVUZXh0UmFuZ2UoKTtcbiAgICAgIHRleHRSYW5nZS5zZWxlY3QoKTtcbiAgICAgIHRoaXMuX3NlbGVjdGlvbi5lbXB0eSgpO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICB9XG4gIHVwZGF0ZUVtcHR5U2VsZWN0aW9uKHRoaXMpO1xufTtcblxuR2V0U2VsZWN0aW9uUHJvdG8uYWRkUmFuZ2UgPSBmdW5jdGlvbiAocmFuZ2UpIHtcbiAgaWYgKHRoaXMuX3NlbGVjdGlvbi50eXBlID09PSAnQ29udHJvbCcpIHtcbiAgICBhZGRSYW5nZVRvQ29udHJvbFNlbGVjdGlvbih0aGlzLCByYW5nZSk7XG4gIH0gZWxzZSB7XG4gICAgcmFuZ2VUb1RleHRSYW5nZShyYW5nZSkuc2VsZWN0KCk7XG4gICAgdGhpcy5fcmFuZ2VzWzBdID0gcmFuZ2U7XG4gICAgdGhpcy5yYW5nZUNvdW50ID0gMTtcbiAgICB0aGlzLmlzQ29sbGFwc2VkID0gdGhpcy5fcmFuZ2VzWzBdLmNvbGxhcHNlZDtcbiAgICB1cGRhdGVBbmNob3JBbmRGb2N1c0Zyb21SYW5nZSh0aGlzLCByYW5nZSwgZmFsc2UpO1xuICB9XG59O1xuXG5HZXRTZWxlY3Rpb25Qcm90by5zZXRSYW5nZXMgPSBmdW5jdGlvbiAocmFuZ2VzKSB7XG4gIHRoaXMucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gIHZhciByYW5nZUNvdW50ID0gcmFuZ2VzLmxlbmd0aDtcbiAgaWYgKHJhbmdlQ291bnQgPiAxKSB7XG4gICAgY3JlYXRlQ29udHJvbFNlbGVjdGlvbih0aGlzLCByYW5nZXMpO1xuICB9IGVsc2UgaWYgKHJhbmdlQ291bnQpIHtcbiAgICB0aGlzLmFkZFJhbmdlKHJhbmdlc1swXSk7XG4gIH1cbn07XG5cbkdldFNlbGVjdGlvblByb3RvLmdldFJhbmdlQXQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgaWYgKGluZGV4IDwgMCB8fCBpbmRleCA+PSB0aGlzLnJhbmdlQ291bnQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2dldFJhbmdlQXQoKTogaW5kZXggb3V0IG9mIGJvdW5kcycpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB0aGlzLl9yYW5nZXNbaW5kZXhdLmNsb25lUmFuZ2UoKTtcbiAgfVxufTtcblxuR2V0U2VsZWN0aW9uUHJvdG8ucmVtb3ZlUmFuZ2UgPSBmdW5jdGlvbiAocmFuZ2UpIHtcbiAgaWYgKHRoaXMuX3NlbGVjdGlvbi50eXBlICE9PSAnQ29udHJvbCcpIHtcbiAgICByZW1vdmVSYW5nZU1hbnVhbGx5KHRoaXMsIHJhbmdlKTtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIGNvbnRyb2xSYW5nZSA9IHRoaXMuX3NlbGVjdGlvbi5jcmVhdGVSYW5nZSgpO1xuICB2YXIgcmFuZ2VFbGVtZW50ID0gZ2V0U2luZ2xlRWxlbWVudEZyb21SYW5nZShyYW5nZSk7XG4gIHZhciBuZXdDb250cm9sUmFuZ2UgPSBib2R5LmNyZWF0ZUNvbnRyb2xSYW5nZSgpO1xuICB2YXIgZWw7XG4gIHZhciByZW1vdmVkID0gZmFsc2U7XG4gIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb250cm9sUmFuZ2UubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgICBlbCA9IGNvbnRyb2xSYW5nZS5pdGVtKGkpO1xuICAgIGlmIChlbCAhPT0gcmFuZ2VFbGVtZW50IHx8IHJlbW92ZWQpIHtcbiAgICAgIG5ld0NvbnRyb2xSYW5nZS5hZGQoY29udHJvbFJhbmdlLml0ZW0oaSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZW1vdmVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgbmV3Q29udHJvbFJhbmdlLnNlbGVjdCgpO1xuICB1cGRhdGVDb250cm9sU2VsZWN0aW9uKHRoaXMpO1xufTtcblxuR2V0U2VsZWN0aW9uUHJvdG8uZWFjaFJhbmdlID0gZnVuY3Rpb24gKGZuLCByZXR1cm5WYWx1ZSkge1xuICB2YXIgaSA9IDA7XG4gIHZhciBsZW4gPSB0aGlzLl9yYW5nZXMubGVuZ3RoO1xuICBmb3IgKGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICBpZiAoZm4odGhpcy5nZXRSYW5nZUF0KGkpKSkge1xuICAgICAgcmV0dXJuIHJldHVyblZhbHVlO1xuICAgIH1cbiAgfVxufTtcblxuR2V0U2VsZWN0aW9uUHJvdG8uZ2V0QWxsUmFuZ2VzID0gZnVuY3Rpb24gKCkge1xuICB2YXIgcmFuZ2VzID0gW107XG4gIHRoaXMuZWFjaFJhbmdlKGZ1bmN0aW9uIChyYW5nZSkge1xuICAgIHJhbmdlcy5wdXNoKHJhbmdlKTtcbiAgfSk7XG4gIHJldHVybiByYW5nZXM7XG59O1xuXG5HZXRTZWxlY3Rpb25Qcm90by5zZXRTaW5nbGVSYW5nZSA9IGZ1bmN0aW9uIChyYW5nZSkge1xuICB0aGlzLnJlbW92ZUFsbFJhbmdlcygpO1xuICB0aGlzLmFkZFJhbmdlKHJhbmdlKTtcbn07XG5cbmZ1bmN0aW9uIGNyZWF0ZUNvbnRyb2xTZWxlY3Rpb24gKHNlbCwgcmFuZ2VzKSB7XG4gIHZhciBjb250cm9sUmFuZ2UgPSBib2R5LmNyZWF0ZUNvbnRyb2xSYW5nZSgpO1xuICBmb3IgKHZhciBpID0gMCwgZWwsIGxlbiA9IHJhbmdlcy5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuICAgIGVsID0gZ2V0U2luZ2xlRWxlbWVudEZyb21SYW5nZShyYW5nZXNbaV0pO1xuICAgIHRyeSB7XG4gICAgICBjb250cm9sUmFuZ2UuYWRkKGVsKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFJhbmdlcygpOiBFbGVtZW50IGNvdWxkIG5vdCBiZSBhZGRlZCB0byBjb250cm9sIHNlbGVjdGlvbicpO1xuICAgIH1cbiAgfVxuICBjb250cm9sUmFuZ2Uuc2VsZWN0KCk7XG4gIHVwZGF0ZUNvbnRyb2xTZWxlY3Rpb24oc2VsKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlUmFuZ2VNYW51YWxseSAoc2VsLCByYW5nZSkge1xuICB2YXIgcmFuZ2VzID0gc2VsLmdldEFsbFJhbmdlcygpO1xuICBzZWwucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gIGZvciAodmFyIGkgPSAwLCBsZW4gPSByYW5nZXMubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgICBpZiAoIWlzU2FtZVJhbmdlKHJhbmdlLCByYW5nZXNbaV0pKSB7XG4gICAgICBzZWwuYWRkUmFuZ2UocmFuZ2VzW2ldKTtcbiAgICB9XG4gIH1cbiAgaWYgKCFzZWwucmFuZ2VDb3VudCkge1xuICAgIHVwZGF0ZUVtcHR5U2VsZWN0aW9uKHNlbCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gdXBkYXRlQW5jaG9yQW5kRm9jdXNGcm9tUmFuZ2UgKHNlbCwgcmFuZ2UpIHtcbiAgdmFyIGFuY2hvclByZWZpeCA9ICdzdGFydCc7XG4gIHZhciBmb2N1c1ByZWZpeCA9ICdlbmQnO1xuICBzZWwuYW5jaG9yTm9kZSA9IHJhbmdlW2FuY2hvclByZWZpeCArICdDb250YWluZXInXTtcbiAgc2VsLmFuY2hvck9mZnNldCA9IHJhbmdlW2FuY2hvclByZWZpeCArICdPZmZzZXQnXTtcbiAgc2VsLmZvY3VzTm9kZSA9IHJhbmdlW2ZvY3VzUHJlZml4ICsgJ0NvbnRhaW5lciddO1xuICBzZWwuZm9jdXNPZmZzZXQgPSByYW5nZVtmb2N1c1ByZWZpeCArICdPZmZzZXQnXTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlRW1wdHlTZWxlY3Rpb24gKHNlbCkge1xuICBzZWwuYW5jaG9yTm9kZSA9IHNlbC5mb2N1c05vZGUgPSBudWxsO1xuICBzZWwuYW5jaG9yT2Zmc2V0ID0gc2VsLmZvY3VzT2Zmc2V0ID0gMDtcbiAgc2VsLnJhbmdlQ291bnQgPSAwO1xuICBzZWwuaXNDb2xsYXBzZWQgPSB0cnVlO1xuICBzZWwuX3Jhbmdlcy5sZW5ndGggPSAwO1xufVxuXG5mdW5jdGlvbiByYW5nZUNvbnRhaW5zU2luZ2xlRWxlbWVudCAocmFuZ2VOb2Rlcykge1xuICBpZiAoIXJhbmdlTm9kZXMubGVuZ3RoIHx8IHJhbmdlTm9kZXNbMF0ubm9kZVR5cGUgIT09IDEpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgZm9yICh2YXIgaSA9IDEsIGxlbiA9IHJhbmdlTm9kZXMubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgICBpZiAoIWlzQW5jZXN0b3JPZihyYW5nZU5vZGVzWzBdLCByYW5nZU5vZGVzW2ldKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gZ2V0U2luZ2xlRWxlbWVudEZyb21SYW5nZSAocmFuZ2UpIHtcbiAgdmFyIG5vZGVzID0gcmFuZ2UuZ2V0Tm9kZXMoKTtcbiAgaWYgKCFyYW5nZUNvbnRhaW5zU2luZ2xlRWxlbWVudChub2RlcykpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2dldFNpbmdsZUVsZW1lbnRGcm9tUmFuZ2UoKTogcmFuZ2UgZGlkIG5vdCBjb25zaXN0IG9mIGEgc2luZ2xlIGVsZW1lbnQnKTtcbiAgfVxuICByZXR1cm4gbm9kZXNbMF07XG59XG5cbmZ1bmN0aW9uIGlzVGV4dFJhbmdlIChyYW5nZSkge1xuICByZXR1cm4gcmFuZ2UgJiYgcmFuZ2UudGV4dCAhPT0gdm9pZCAwO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVGcm9tVGV4dFJhbmdlIChzZWwsIHJhbmdlKSB7XG4gIHNlbC5fcmFuZ2VzID0gW3JhbmdlXTtcbiAgdXBkYXRlQW5jaG9yQW5kRm9jdXNGcm9tUmFuZ2Uoc2VsLCByYW5nZSwgZmFsc2UpO1xuICBzZWwucmFuZ2VDb3VudCA9IDE7XG4gIHNlbC5pc0NvbGxhcHNlZCA9IHJhbmdlLmNvbGxhcHNlZDtcbn1cblxuZnVuY3Rpb24gdXBkYXRlQ29udHJvbFNlbGVjdGlvbiAoc2VsKSB7XG4gIHNlbC5fcmFuZ2VzLmxlbmd0aCA9IDA7XG4gIGlmIChzZWwuX3NlbGVjdGlvbi50eXBlID09PSAnTm9uZScpIHtcbiAgICB1cGRhdGVFbXB0eVNlbGVjdGlvbihzZWwpO1xuICB9IGVsc2Uge1xuICAgIHZhciBjb250cm9sUmFuZ2UgPSBzZWwuX3NlbGVjdGlvbi5jcmVhdGVSYW5nZSgpO1xuICAgIGlmIChpc1RleHRSYW5nZShjb250cm9sUmFuZ2UpKSB7XG4gICAgICB1cGRhdGVGcm9tVGV4dFJhbmdlKHNlbCwgY29udHJvbFJhbmdlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2VsLnJhbmdlQ291bnQgPSBjb250cm9sUmFuZ2UubGVuZ3RoO1xuICAgICAgdmFyIHJhbmdlO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWwucmFuZ2VDb3VudDsgKytpKSB7XG4gICAgICAgIHJhbmdlID0gZG9jLmNyZWF0ZVJhbmdlKCk7XG4gICAgICAgIHJhbmdlLnNlbGVjdE5vZGUoY29udHJvbFJhbmdlLml0ZW0oaSkpO1xuICAgICAgICBzZWwuX3Jhbmdlcy5wdXNoKHJhbmdlKTtcbiAgICAgIH1cbiAgICAgIHNlbC5pc0NvbGxhcHNlZCA9IHNlbC5yYW5nZUNvdW50ID09PSAxICYmIHNlbC5fcmFuZ2VzWzBdLmNvbGxhcHNlZDtcbiAgICAgIHVwZGF0ZUFuY2hvckFuZEZvY3VzRnJvbVJhbmdlKHNlbCwgc2VsLl9yYW5nZXNbc2VsLnJhbmdlQ291bnQgLSAxXSwgZmFsc2UpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBhZGRSYW5nZVRvQ29udHJvbFNlbGVjdGlvbiAoc2VsLCByYW5nZSkge1xuICB2YXIgY29udHJvbFJhbmdlID0gc2VsLl9zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKTtcbiAgdmFyIHJhbmdlRWxlbWVudCA9IGdldFNpbmdsZUVsZW1lbnRGcm9tUmFuZ2UocmFuZ2UpO1xuICB2YXIgbmV3Q29udHJvbFJhbmdlID0gYm9keS5jcmVhdGVDb250cm9sUmFuZ2UoKTtcbiAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbnRyb2xSYW5nZS5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuICAgIG5ld0NvbnRyb2xSYW5nZS5hZGQoY29udHJvbFJhbmdlLml0ZW0oaSkpO1xuICB9XG4gIHRyeSB7XG4gICAgbmV3Q29udHJvbFJhbmdlLmFkZChyYW5nZUVsZW1lbnQpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdhZGRSYW5nZSgpOiBFbGVtZW50IGNvdWxkIG5vdCBiZSBhZGRlZCB0byBjb250cm9sIHNlbGVjdGlvbicpO1xuICB9XG4gIG5ld0NvbnRyb2xSYW5nZS5zZWxlY3QoKTtcbiAgdXBkYXRlQ29udHJvbFNlbGVjdGlvbihzZWwpO1xufVxuXG5mdW5jdGlvbiBpc1NhbWVSYW5nZSAobGVmdCwgcmlnaHQpIHtcbiAgcmV0dXJuIChcbiAgICBsZWZ0LnN0YXJ0Q29udGFpbmVyID09PSByaWdodC5zdGFydENvbnRhaW5lciAmJlxuICAgIGxlZnQuc3RhcnRPZmZzZXQgPT09IHJpZ2h0LnN0YXJ0T2Zmc2V0ICYmXG4gICAgbGVmdC5lbmRDb250YWluZXIgPT09IHJpZ2h0LmVuZENvbnRhaW5lciAmJlxuICAgIGxlZnQuZW5kT2Zmc2V0ID09PSByaWdodC5lbmRPZmZzZXRcbiAgKTtcbn1cblxuZnVuY3Rpb24gaXNBbmNlc3Rvck9mIChhbmNlc3RvciwgZGVzY2VuZGFudCkge1xuICB2YXIgbm9kZSA9IGRlc2NlbmRhbnQ7XG4gIHdoaWxlIChub2RlLnBhcmVudE5vZGUpIHtcbiAgICBpZiAobm9kZS5wYXJlbnROb2RlID09PSBhbmNlc3Rvcikge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiBnZXRTZWxlY3Rpb24gKCkge1xuICByZXR1cm4gbmV3IEdldFNlbGVjdGlvbihnbG9iYWwuZG9jdW1lbnQuc2VsZWN0aW9uKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXRTZWxlY3Rpb247XG4iXX0=
		}, { "./rangeToTextRange": 10 }], 9: [function (require, module, exports) {
			'use strict';

			function isHostMethod(host, prop) {
				var type = typeof host[prop];
				return type === 'function' || !!(type === 'object' && host[prop]) || type === 'unknown';
			}

			function isHostProperty(host, prop) {
				return typeof host[prop] !== 'undefined';
			}

			function many(fn) {
				return function areHosted(host, props) {
					var i = props.length;
					while (i--) {
						if (!fn(host, props[i])) {
							return false;
						}
					}
					return true;
				};
			}

			module.exports = {
				method: isHostMethod,
				methods: many(isHostMethod),
				property: isHostProperty,
				properties: many(isHostProperty)
			};

		}, {}], 10: [function (require, module, exports) {
			(function (global) {
				'use strict';

				var doc = global.document;
				var body = doc.body;

				function rangeToTextRange(p) {
					if (p.collapsed) {
						return createBoundaryTextRange({ node: p.startContainer, offset: p.startOffset }, true);
					}
					var startRange = createBoundaryTextRange({ node: p.startContainer, offset: p.startOffset }, true);
					var endRange = createBoundaryTextRange({ node: p.endContainer, offset: p.endOffset }, false);
					var textRange = body.createTextRange();
					textRange.setEndPoint('StartToStart', startRange);
					textRange.setEndPoint('EndToEnd', endRange);
					return textRange;
				}

				function isCharacterDataNode(node) {
					var t = node.nodeType;
					return t === 3 || t === 4 || t === 8;
				}

				function createBoundaryTextRange(p, starting) {
					var bound;
					var parent;
					var offset = p.offset;
					var workingNode;
					var childNodes;
					var range = body.createTextRange();
					var data = isCharacterDataNode(p.node);

					if (data) {
						bound = p.node;
						parent = bound.parentNode;
					} else {
						childNodes = p.node.childNodes;
						bound = offset < childNodes.length ? childNodes[offset] : null;
						parent = p.node;
					}

					workingNode = doc.createElement('span');
					workingNode.innerHTML = '&#feff;';

					if (bound) {
						parent.insertBefore(workingNode, bound);
					} else {
						parent.appendChild(workingNode);
					}

					range.moveToElementText(workingNode);
					range.collapse(!starting);
					parent.removeChild(workingNode);

					if (data) {
						range[starting ? 'moveStart' : 'moveEnd']('character', offset);
					}
					return range;
				}

				module.exports = rangeToTextRange;

			}).call(this, typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
			//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9zZWxlY2Npb24vc3JjL3JhbmdlVG9UZXh0UmFuZ2UuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciBkb2MgPSBnbG9iYWwuZG9jdW1lbnQ7XG52YXIgYm9keSA9IGRvYy5ib2R5O1xuXG5mdW5jdGlvbiByYW5nZVRvVGV4dFJhbmdlIChwKSB7XG4gIGlmIChwLmNvbGxhcHNlZCkge1xuICAgIHJldHVybiBjcmVhdGVCb3VuZGFyeVRleHRSYW5nZSh7IG5vZGU6IHAuc3RhcnRDb250YWluZXIsIG9mZnNldDogcC5zdGFydE9mZnNldCB9LCB0cnVlKTtcbiAgfVxuICB2YXIgc3RhcnRSYW5nZSA9IGNyZWF0ZUJvdW5kYXJ5VGV4dFJhbmdlKHsgbm9kZTogcC5zdGFydENvbnRhaW5lciwgb2Zmc2V0OiBwLnN0YXJ0T2Zmc2V0IH0sIHRydWUpO1xuICB2YXIgZW5kUmFuZ2UgPSBjcmVhdGVCb3VuZGFyeVRleHRSYW5nZSh7IG5vZGU6IHAuZW5kQ29udGFpbmVyLCBvZmZzZXQ6IHAuZW5kT2Zmc2V0IH0sIGZhbHNlKTtcbiAgdmFyIHRleHRSYW5nZSA9IGJvZHkuY3JlYXRlVGV4dFJhbmdlKCk7XG4gIHRleHRSYW5nZS5zZXRFbmRQb2ludCgnU3RhcnRUb1N0YXJ0Jywgc3RhcnRSYW5nZSk7XG4gIHRleHRSYW5nZS5zZXRFbmRQb2ludCgnRW5kVG9FbmQnLCBlbmRSYW5nZSk7XG4gIHJldHVybiB0ZXh0UmFuZ2U7XG59XG5cbmZ1bmN0aW9uIGlzQ2hhcmFjdGVyRGF0YU5vZGUgKG5vZGUpIHtcbiAgdmFyIHQgPSBub2RlLm5vZGVUeXBlO1xuICByZXR1cm4gdCA9PT0gMyB8fCB0ID09PSA0IHx8IHQgPT09IDggO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVCb3VuZGFyeVRleHRSYW5nZSAocCwgc3RhcnRpbmcpIHtcbiAgdmFyIGJvdW5kO1xuICB2YXIgcGFyZW50O1xuICB2YXIgb2Zmc2V0ID0gcC5vZmZzZXQ7XG4gIHZhciB3b3JraW5nTm9kZTtcbiAgdmFyIGNoaWxkTm9kZXM7XG4gIHZhciByYW5nZSA9IGJvZHkuY3JlYXRlVGV4dFJhbmdlKCk7XG4gIHZhciBkYXRhID0gaXNDaGFyYWN0ZXJEYXRhTm9kZShwLm5vZGUpO1xuXG4gIGlmIChkYXRhKSB7XG4gICAgYm91bmQgPSBwLm5vZGU7XG4gICAgcGFyZW50ID0gYm91bmQucGFyZW50Tm9kZTtcbiAgfSBlbHNlIHtcbiAgICBjaGlsZE5vZGVzID0gcC5ub2RlLmNoaWxkTm9kZXM7XG4gICAgYm91bmQgPSBvZmZzZXQgPCBjaGlsZE5vZGVzLmxlbmd0aCA/IGNoaWxkTm9kZXNbb2Zmc2V0XSA6IG51bGw7XG4gICAgcGFyZW50ID0gcC5ub2RlO1xuICB9XG5cbiAgd29ya2luZ05vZGUgPSBkb2MuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICB3b3JraW5nTm9kZS5pbm5lckhUTUwgPSAnJiNmZWZmOyc7XG5cbiAgaWYgKGJvdW5kKSB7XG4gICAgcGFyZW50Lmluc2VydEJlZm9yZSh3b3JraW5nTm9kZSwgYm91bmQpO1xuICB9IGVsc2Uge1xuICAgIHBhcmVudC5hcHBlbmRDaGlsZCh3b3JraW5nTm9kZSk7XG4gIH1cblxuICByYW5nZS5tb3ZlVG9FbGVtZW50VGV4dCh3b3JraW5nTm9kZSk7XG4gIHJhbmdlLmNvbGxhcHNlKCFzdGFydGluZyk7XG4gIHBhcmVudC5yZW1vdmVDaGlsZCh3b3JraW5nTm9kZSk7XG5cbiAgaWYgKGRhdGEpIHtcbiAgICByYW5nZVtzdGFydGluZyA/ICdtb3ZlU3RhcnQnIDogJ21vdmVFbmQnXSgnY2hhcmFjdGVyJywgb2Zmc2V0KTtcbiAgfVxuICByZXR1cm4gcmFuZ2U7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gcmFuZ2VUb1RleHRSYW5nZTtcbiJdfQ==
		}, {}], 11: [function (require, module, exports) {
			'use strict';

			var getSelection = require('./getSelection');
			var setSelection = require('./setSelection');

			module.exports = {
				get: getSelection,
				set: setSelection
			};

		}, { "./getSelection": 5, "./setSelection": 12 }], 12: [function (require, module, exports) {
			(function (global) {
				'use strict';

				var getSelection = require('./getSelection');
				var rangeToTextRange = require('./rangeToTextRange');
				var doc = global.document;

				function setSelection(p) {
					if (doc.createRange) {
						modernSelection();
					} else {
						oldSelection();
					}

					function modernSelection() {
						var sel = getSelection();
						var range = doc.createRange();
						if (!p.startContainer) {
							return;
						}
						if (p.endContainer) {
							range.setEnd(p.endContainer, p.endOffset);
						} else {
							range.setEnd(p.startContainer, p.startOffset);
						}
						range.setStart(p.startContainer, p.startOffset);
						sel.removeAllRanges();
						sel.addRange(range);
					}

					function oldSelection() {
						rangeToTextRange(p).select();
					}
				}

				module.exports = setSelection;

			}).call(this, typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
			//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9zZWxlY2Npb24vc3JjL3NldFNlbGVjdGlvbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciBnZXRTZWxlY3Rpb24gPSByZXF1aXJlKCcuL2dldFNlbGVjdGlvbicpO1xudmFyIHJhbmdlVG9UZXh0UmFuZ2UgPSByZXF1aXJlKCcuL3JhbmdlVG9UZXh0UmFuZ2UnKTtcbnZhciBkb2MgPSBnbG9iYWwuZG9jdW1lbnQ7XG5cbmZ1bmN0aW9uIHNldFNlbGVjdGlvbiAocCkge1xuICBpZiAoZG9jLmNyZWF0ZVJhbmdlKSB7XG4gICAgbW9kZXJuU2VsZWN0aW9uKCk7XG4gIH0gZWxzZSB7XG4gICAgb2xkU2VsZWN0aW9uKCk7XG4gIH1cblxuICBmdW5jdGlvbiBtb2Rlcm5TZWxlY3Rpb24gKCkge1xuICAgIHZhciBzZWwgPSBnZXRTZWxlY3Rpb24oKTtcbiAgICB2YXIgcmFuZ2UgPSBkb2MuY3JlYXRlUmFuZ2UoKTtcbiAgICBpZiAoIXAuc3RhcnRDb250YWluZXIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHAuZW5kQ29udGFpbmVyKSB7XG4gICAgICByYW5nZS5zZXRFbmQocC5lbmRDb250YWluZXIsIHAuZW5kT2Zmc2V0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmFuZ2Uuc2V0RW5kKHAuc3RhcnRDb250YWluZXIsIHAuc3RhcnRPZmZzZXQpO1xuICAgIH1cbiAgICByYW5nZS5zZXRTdGFydChwLnN0YXJ0Q29udGFpbmVyLCBwLnN0YXJ0T2Zmc2V0KTtcbiAgICBzZWwucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gICAgc2VsLmFkZFJhbmdlKHJhbmdlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9sZFNlbGVjdGlvbiAoKSB7XG4gICAgcmFuZ2VUb1RleHRSYW5nZShwKS5zZWxlY3QoKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHNldFNlbGVjdGlvbjtcbiJdfQ==
		}, { "./getSelection": 5, "./rangeToTextRange": 10 }], 13: [function (require, module, exports) {
			'use strict';

			var get = easyGet;
			var set = easySet;

			if (document.selection && document.selection.createRange) {
				get = hardGet;
				set = hardSet;
			}

			function easyGet(el) {
				return {
					start: el.selectionStart,
					end: el.selectionEnd
				};
			}

			function hardGet(el) {
				var active = document.activeElement;
				if (active !== el) {
					el.focus();
				}

				var range = document.selection.createRange();
				var bookmark = range.getBookmark();
				var original = el.value;
				var marker = getUniqueMarker(original);
				var parent = range.parentElement();
				if (parent === null || !inputs(parent)) {
					return result(0, 0);
				}
				range.text = marker + range.text + marker;

				var contents = el.value;

				el.value = original;
				range.moveToBookmark(bookmark);
				range.select();

				return result(contents.indexOf(marker), contents.lastIndexOf(marker) - marker.length);

				function result(start, end) {
					if (active !== el) { // don't disrupt pre-existing state
						if (active) {
							active.focus();
						} else {
							el.blur();
						}
					}
					return { start: start, end: end };
				}
			}

			function getUniqueMarker(contents) {
				var marker;
				do {
					marker = '@@marker.' + Math.random() * new Date();
				} while (contents.indexOf(marker) !== -1);
				return marker;
			}

			function inputs(el) {
				return ((el.tagName === 'INPUT' && el.type === 'text') || el.tagName === 'TEXTAREA');
			}

			function easySet(el, p) {
				el.selectionStart = parse(el, p.start);
				el.selectionEnd = parse(el, p.end);
			}

			function hardSet(el, p) {
				var range = el.createTextRange();

				if (p.start === 'end' && p.end === 'end') {
					range.collapse(false);
					range.select();
				} else {
					range.collapse(true);
					range.moveEnd('character', parse(el, p.end));
					range.moveStart('character', parse(el, p.start));
					range.select();
				}
			}

			function parse(el, value) {
				return value === 'end' ? el.value.length : value || 0;
			}

			function sell(el, p)
			{
				if (arguments.length === 2) {
					set(el, p);
				}
				return get(el);
			}

			module.exports = sell;

		}, {}], 14: [function (require, module, exports) {
			(function (global) {
				'use strict';

				var sell = require('sell');
				var crossvent = require('crossvent');
				var seleccion = require('seleccion');
				var throttle = require('./throttle');
				var getSelection = seleccion.get;
				var props = [
				  'direction',
				  'boxSizing',
				  'width',
				  'height',
				  'overflowX',
				  'overflowY',
				  'borderTopWidth',
				  'borderRightWidth',
				  'borderBottomWidth',
				  'borderLeftWidth',
				  'paddingTop',
				  'paddingRight',
				  'paddingBottom',
				  'paddingLeft',
				  'fontStyle',
				  'fontVariant',
				  'fontWeight',
				  'fontStretch',
				  'fontSize',
				  'fontSizeAdjust',
				  'lineHeight',
				  'fontFamily',
				  'textAlign',
				  'textTransform',
				  'textIndent',
				  'textDecoration',
				  'letterSpacing',
				  'wordSpacing'
				];
				var win = global;
				var doc = document;
				var ff = win.mozInnerScreenX !== null && win.mozInnerScreenX !== void 0;

				function tailormade(el, options) {
					var textInput = el.tagName === 'INPUT' || el.tagName === 'TEXTAREA';
					var throttledRefresh = throttle(refresh, 30);
					var o = options || {};

					bind();

					return {
						read: readPosition,
						refresh: throttledRefresh,
						destroy: destroy
					};

					function noop() { }
					function readPosition() { return (textInput ? coordsText : coordsHTML)(); }

					function refresh() {
						if (o.sleeping) {
							return;
						}
						return (o.update || noop)(readPosition());
					}

					function coordsText() {
						var p = sell(el);
						var context = prepare();
						var readings = readTextCoords(context, p.start);
						doc.body.removeChild(context.mirror);
						return readings;
					}

					function coordsHTML() {
						var sel = getSelection();
						if (sel.rangeCount) {
							var range = sel.getRangeAt(0);
							var needsToWorkAroundNewlineBug = range.startContainer.nodeName === 'P' && range.startOffset === 0;
							if (needsToWorkAroundNewlineBug) {
								return {
									x: range.startContainer.offsetLeft,
									y: range.startContainer.offsetTop,
									absolute: true
								};
							}
							if (range.getClientRects) {
								var rects = range.getClientRects();
								if (rects.length > 0) {
									return {
										x: rects[0].left,
										y: rects[0].top,
										absolute: true
									};
								}
							}
						}
						return { x: 0, y: 0 };
					}

					function readTextCoords(context, p) {
						var rest = doc.createElement('span');
						var mirror = context.mirror;
						var computed = context.computed;

						write(mirror, read(el).substring(0, p));

						if (el.tagName === 'INPUT') {
							mirror.textContent = mirror.textContent.replace(/\s/g, '\u00a0');
						}

						write(rest, read(el).substring(p) || '.');

						mirror.appendChild(rest);

						return {
							x: rest.offsetLeft + parseInt(computed['borderLeftWidth']),
							y: rest.offsetTop + parseInt(computed['borderTopWidth'])
						};
					}

					function read(el) {
						return textInput ? el.value : el.innerHTML;
					}

					function prepare() {
						var computed = win.getComputedStyle ? getComputedStyle(el) : el.currentStyle;
						var mirror = doc.createElement('div');
						var style = mirror.style;

						doc.body.appendChild(mirror);

						if (el.tagName !== 'INPUT') {
							style.wordWrap = 'break-word';
						}
						style.whiteSpace = 'pre-wrap';
						style.position = 'absolute';
						style.visibility = 'hidden';
						props.forEach(copy);

						if (ff) {
							style.width = parseInt(computed.width) - 2 + 'px';
							if (el.scrollHeight > parseInt(computed.height)) {
								style.overflowY = 'scroll';
							}
						} else {
							style.overflow = 'hidden';
						}
						return { mirror: mirror, computed: computed };

						function copy(prop) {
							style[prop] = computed[prop];
						}
					}

					function write(el, value) {
						if (textInput) {
							el.textContent = value;
						} else {
							el.innerHTML = value;
						}
					}

					function bind(remove) {
						var op = remove ? 'remove' : 'add';
						crossvent[op](el, 'keydown', throttledRefresh);
						crossvent[op](el, 'keyup', throttledRefresh);
						crossvent[op](el, 'input', throttledRefresh);
						crossvent[op](el, 'paste', throttledRefresh);
						crossvent[op](el, 'change', throttledRefresh);
					}

					function destroy() {
						bind(true);
					}
				}

				module.exports = tailormade;

			}).call(this, typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
			//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRhaWxvcm1hZGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgc2VsbCA9IHJlcXVpcmUoJ3NlbGwnKTtcbnZhciBjcm9zc3ZlbnQgPSByZXF1aXJlKCdjcm9zc3ZlbnQnKTtcbnZhciBzZWxlY2Npb24gPSByZXF1aXJlKCdzZWxlY2Npb24nKTtcbnZhciB0aHJvdHRsZSA9IHJlcXVpcmUoJy4vdGhyb3R0bGUnKTtcbnZhciBnZXRTZWxlY3Rpb24gPSBzZWxlY2Npb24uZ2V0O1xudmFyIHByb3BzID0gW1xuICAnZGlyZWN0aW9uJyxcbiAgJ2JveFNpemluZycsXG4gICd3aWR0aCcsXG4gICdoZWlnaHQnLFxuICAnb3ZlcmZsb3dYJyxcbiAgJ292ZXJmbG93WScsXG4gICdib3JkZXJUb3BXaWR0aCcsXG4gICdib3JkZXJSaWdodFdpZHRoJyxcbiAgJ2JvcmRlckJvdHRvbVdpZHRoJyxcbiAgJ2JvcmRlckxlZnRXaWR0aCcsXG4gICdwYWRkaW5nVG9wJyxcbiAgJ3BhZGRpbmdSaWdodCcsXG4gICdwYWRkaW5nQm90dG9tJyxcbiAgJ3BhZGRpbmdMZWZ0JyxcbiAgJ2ZvbnRTdHlsZScsXG4gICdmb250VmFyaWFudCcsXG4gICdmb250V2VpZ2h0JyxcbiAgJ2ZvbnRTdHJldGNoJyxcbiAgJ2ZvbnRTaXplJyxcbiAgJ2ZvbnRTaXplQWRqdXN0JyxcbiAgJ2xpbmVIZWlnaHQnLFxuICAnZm9udEZhbWlseScsXG4gICd0ZXh0QWxpZ24nLFxuICAndGV4dFRyYW5zZm9ybScsXG4gICd0ZXh0SW5kZW50JyxcbiAgJ3RleHREZWNvcmF0aW9uJyxcbiAgJ2xldHRlclNwYWNpbmcnLFxuICAnd29yZFNwYWNpbmcnXG5dO1xudmFyIHdpbiA9IGdsb2JhbDtcbnZhciBkb2MgPSBkb2N1bWVudDtcbnZhciBmZiA9IHdpbi5tb3pJbm5lclNjcmVlblggIT09IG51bGwgJiYgd2luLm1veklubmVyU2NyZWVuWCAhPT0gdm9pZCAwO1xuXG5mdW5jdGlvbiB0YWlsb3JtYWRlIChlbCwgb3B0aW9ucykge1xuICB2YXIgdGV4dElucHV0ID0gZWwudGFnTmFtZSA9PT0gJ0lOUFVUJyB8fCBlbC50YWdOYW1lID09PSAnVEVYVEFSRUEnO1xuICB2YXIgdGhyb3R0bGVkUmVmcmVzaCA9IHRocm90dGxlKHJlZnJlc2gsIDMwKTtcbiAgdmFyIG8gPSBvcHRpb25zIHx8IHt9O1xuXG4gIGJpbmQoKTtcblxuICByZXR1cm4ge1xuICAgIHJlYWQ6IHJlYWRQb3NpdGlvbixcbiAgICByZWZyZXNoOiB0aHJvdHRsZWRSZWZyZXNoLFxuICAgIGRlc3Ryb3k6IGRlc3Ryb3lcbiAgfTtcblxuICBmdW5jdGlvbiBub29wICgpIHt9XG4gIGZ1bmN0aW9uIHJlYWRQb3NpdGlvbiAoKSB7IHJldHVybiAodGV4dElucHV0ID8gY29vcmRzVGV4dCA6IGNvb3Jkc0hUTUwpKCk7IH1cblxuICBmdW5jdGlvbiByZWZyZXNoICgpIHtcbiAgICBpZiAoby5zbGVlcGluZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByZXR1cm4gKG8udXBkYXRlIHx8IG5vb3ApKHJlYWRQb3NpdGlvbigpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvb3Jkc1RleHQgKCkge1xuICAgIHZhciBwID0gc2VsbChlbCk7XG4gICAgdmFyIGNvbnRleHQgPSBwcmVwYXJlKCk7XG4gICAgdmFyIHJlYWRpbmdzID0gcmVhZFRleHRDb29yZHMoY29udGV4dCwgcC5zdGFydCk7XG4gICAgZG9jLmJvZHkucmVtb3ZlQ2hpbGQoY29udGV4dC5taXJyb3IpO1xuICAgIHJldHVybiByZWFkaW5ncztcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvb3Jkc0hUTUwgKCkge1xuICAgIHZhciBzZWwgPSBnZXRTZWxlY3Rpb24oKTtcbiAgICBpZiAoc2VsLnJhbmdlQ291bnQpIHtcbiAgICAgIHZhciByYW5nZSA9IHNlbC5nZXRSYW5nZUF0KDApO1xuICAgICAgdmFyIG5lZWRzVG9Xb3JrQXJvdW5kTmV3bGluZUJ1ZyA9IHJhbmdlLnN0YXJ0Q29udGFpbmVyLm5vZGVOYW1lID09PSAnUCcgJiYgcmFuZ2Uuc3RhcnRPZmZzZXQgPT09IDA7XG4gICAgICBpZiAobmVlZHNUb1dvcmtBcm91bmROZXdsaW5lQnVnKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgeDogcmFuZ2Uuc3RhcnRDb250YWluZXIub2Zmc2V0TGVmdCxcbiAgICAgICAgICB5OiByYW5nZS5zdGFydENvbnRhaW5lci5vZmZzZXRUb3AsXG4gICAgICAgICAgYWJzb2x1dGU6IHRydWVcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIGlmIChyYW5nZS5nZXRDbGllbnRSZWN0cykge1xuICAgICAgICB2YXIgcmVjdHMgPSByYW5nZS5nZXRDbGllbnRSZWN0cygpO1xuICAgICAgICBpZiAocmVjdHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB4OiByZWN0c1swXS5sZWZ0LFxuICAgICAgICAgICAgeTogcmVjdHNbMF0udG9wLFxuICAgICAgICAgICAgYWJzb2x1dGU6IHRydWVcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7IHg6IDAsIHk6IDAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlYWRUZXh0Q29vcmRzIChjb250ZXh0LCBwKSB7XG4gICAgdmFyIHJlc3QgPSBkb2MuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgIHZhciBtaXJyb3IgPSBjb250ZXh0Lm1pcnJvcjtcbiAgICB2YXIgY29tcHV0ZWQgPSBjb250ZXh0LmNvbXB1dGVkO1xuXG4gICAgd3JpdGUobWlycm9yLCByZWFkKGVsKS5zdWJzdHJpbmcoMCwgcCkpO1xuXG4gICAgaWYgKGVsLnRhZ05hbWUgPT09ICdJTlBVVCcpIHtcbiAgICAgIG1pcnJvci50ZXh0Q29udGVudCA9IG1pcnJvci50ZXh0Q29udGVudC5yZXBsYWNlKC9cXHMvZywgJ1xcdTAwYTAnKTtcbiAgICB9XG5cbiAgICB3cml0ZShyZXN0LCByZWFkKGVsKS5zdWJzdHJpbmcocCkgfHwgJy4nKTtcblxuICAgIG1pcnJvci5hcHBlbmRDaGlsZChyZXN0KTtcblxuICAgIHJldHVybiB7XG4gICAgICB4OiByZXN0Lm9mZnNldExlZnQgKyBwYXJzZUludChjb21wdXRlZFsnYm9yZGVyTGVmdFdpZHRoJ10pLFxuICAgICAgeTogcmVzdC5vZmZzZXRUb3AgKyBwYXJzZUludChjb21wdXRlZFsnYm9yZGVyVG9wV2lkdGgnXSlcbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gcmVhZCAoZWwpIHtcbiAgICByZXR1cm4gdGV4dElucHV0ID8gZWwudmFsdWUgOiBlbC5pbm5lckhUTUw7XG4gIH1cblxuICBmdW5jdGlvbiBwcmVwYXJlICgpIHtcbiAgICB2YXIgY29tcHV0ZWQgPSB3aW4uZ2V0Q29tcHV0ZWRTdHlsZSA/IGdldENvbXB1dGVkU3R5bGUoZWwpIDogZWwuY3VycmVudFN0eWxlO1xuICAgIHZhciBtaXJyb3IgPSBkb2MuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdmFyIHN0eWxlID0gbWlycm9yLnN0eWxlO1xuXG4gICAgZG9jLmJvZHkuYXBwZW5kQ2hpbGQobWlycm9yKTtcblxuICAgIGlmIChlbC50YWdOYW1lICE9PSAnSU5QVVQnKSB7XG4gICAgICBzdHlsZS53b3JkV3JhcCA9ICdicmVhay13b3JkJztcbiAgICB9XG4gICAgc3R5bGUud2hpdGVTcGFjZSA9ICdwcmUtd3JhcCc7XG4gICAgc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgIHN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcbiAgICBwcm9wcy5mb3JFYWNoKGNvcHkpO1xuXG4gICAgaWYgKGZmKSB7XG4gICAgICBzdHlsZS53aWR0aCA9IHBhcnNlSW50KGNvbXB1dGVkLndpZHRoKSAtIDIgKyAncHgnO1xuICAgICAgaWYgKGVsLnNjcm9sbEhlaWdodCA+IHBhcnNlSW50KGNvbXB1dGVkLmhlaWdodCkpIHtcbiAgICAgICAgc3R5bGUub3ZlcmZsb3dZID0gJ3Njcm9sbCc7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG4gICAgfVxuICAgIHJldHVybiB7IG1pcnJvcjogbWlycm9yLCBjb21wdXRlZDogY29tcHV0ZWQgfTtcblxuICAgIGZ1bmN0aW9uIGNvcHkgKHByb3ApIHtcbiAgICAgIHN0eWxlW3Byb3BdID0gY29tcHV0ZWRbcHJvcF07XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gd3JpdGUgKGVsLCB2YWx1ZSkge1xuICAgIGlmICh0ZXh0SW5wdXQpIHtcbiAgICAgIGVsLnRleHRDb250ZW50ID0gdmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsLmlubmVySFRNTCA9IHZhbHVlO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGJpbmQgKHJlbW92ZSkge1xuICAgIHZhciBvcCA9IHJlbW92ZSA/ICdyZW1vdmUnIDogJ2FkZCc7XG4gICAgY3Jvc3N2ZW50W29wXShlbCwgJ2tleWRvd24nLCB0aHJvdHRsZWRSZWZyZXNoKTtcbiAgICBjcm9zc3ZlbnRbb3BdKGVsLCAna2V5dXAnLCB0aHJvdHRsZWRSZWZyZXNoKTtcbiAgICBjcm9zc3ZlbnRbb3BdKGVsLCAnaW5wdXQnLCB0aHJvdHRsZWRSZWZyZXNoKTtcbiAgICBjcm9zc3ZlbnRbb3BdKGVsLCAncGFzdGUnLCB0aHJvdHRsZWRSZWZyZXNoKTtcbiAgICBjcm9zc3ZlbnRbb3BdKGVsLCAnY2hhbmdlJywgdGhyb3R0bGVkUmVmcmVzaCk7XG4gIH1cblxuICBmdW5jdGlvbiBkZXN0cm95ICgpIHtcbiAgICBiaW5kKHRydWUpO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdGFpbG9ybWFkZTtcbiJdfQ==
		}, { "./throttle": 15, "crossvent": 3, "seleccion": 11, "sell": 13 }], 15: [function (require, module, exports) {
			'use strict';

			function throttle(fn, boundary) {
				var last = -Infinity;
				var timer;
				return function bounced() {
					if (timer) {
						return;
					}
					unbound();

					function unbound() {
						clearTimeout(timer);
						timer = null;
						var next = last + boundary;
						var now = Date.now();
						if (now > next) {
							last = now;
							fn();
						} else {
							timer = setTimeout(unbound, next - now);
						}
					}
				};
			}

			module.exports = throttle;

		}, {}]
	}, {}, [1])(1)
});
(function () {
	function tagStart(word) {
		var WORD_SEPARATORS = "+-*/)(^,";
		var oword = word;
		var max = 0;
		for (var i = 0; i < WORD_SEPARATORS.length; i++) {
			var c = WORD_SEPARATORS.charAt(i);
			max = Math.max(max, (word.lastIndexOf(c) + 1));
		}
		return max;
	}

	define('auto-complete', ['../lib/bullseye'], function (bullseye) {



		return Backbone.View.extend({

			className: 'token-editor-auto-complete',

			menu: [],

			_defaultOptions: {
				items: [],
				minLen: 2,
				maxResults: 4,
				minScore: 0.9
			},

			events: {
				'click > div': 'onClick'
			},

			initialize: function () {

				this.options = _.extend(this._defaultOptions, this.options || {});

				document.body.appendChild(this.el);

				this.position = bullseye(this.el, this.options.target, {
					caret: true,
					autoupdateToCaret: true
				})

				this.hide();
			},

			setItems: function (items) {
				this.options.items = items
			},

			bindKeyboardEvents: function () {
				this.onKeydown = this.onKeydown || this._onKeydown.bind(this)
				this.onKeyup = this.onKeyup || this._onKeyup.bind(this)
				document.body.addEventListener('keydown', this.onKeydown, true)
				document.body.addEventListener('keyup', this.onKeyup, true)
			},

			unbindKeyboardEvents: function () {
				document.body.removeEventListener('keydown', this.onKeydown, true)
				document.body.removeEventListener('keyup', this.onKeyup, true)
			},

			_onKeydown: function (e) {

				if (e.which == 27 || e.which == 38 || e.which == 40 || e.which == 13 || e.which == 9) {

					if (e.which == 27) // esc
						this.hide();
					else if (e.which == 13 || e.which == 9) // enter or tab
						this.onSelect()
					else if (e.which == 38) // up
						this.selectPrev();
					else if (e.which == 40) // down
						this.selectNext();

					e.preventDefault();
					e.stopPropagation()
					return false;
				}



			},

			_onKeyup: function (e) {
				if (e.which == 27 || e.which == 38 || e.which == 40 || e.which == 13) {
					e.preventDefault();
					e.stopPropagation()
					return false;
				}
				//this.afterKeySelection = window.getSelection();
			},

			selectPrev: function () {
				this._selectIndex(this.selected - 1 < 0 ? this.menu.length - 1 : this.selected - 1)
			},

			selectNext: function () {
				this._selectIndex(this.selected + 1 >= this.menu.length ? 0 : this.selected + 1)
			},

			_selectIndex: function (indx) {
				this.el.childNodes[this.selected].classList.remove('selected')
				this.el.childNodes[indx].classList.add('selected')
				this.selected = indx;
			},

			onClick: function (e) {
				//Modal.alert('Use the <u>up</u> and <u>down</u> keys and press <code>enter</code> to select.')
				/*debugger;
				var el = e.currentTarget;
				this.selected = Array.prototype.indexOf.call(el.parentNode.childNodes, el);
				console.log(this.selected, el);
				this.onSelect();*/
			},

			onSelect: function () {
				try{console.log("selected " + this.menu[this.selected].label);} catch (e) { }

				this.trigger('select', this.menu[this.selected], this)
			},

			render: function (word) {

				this.$el.html('')

				if (!word || word.length < this.options.minLen) {
					this.hide();

				} else {
					this.menuFor(word)

					if (this.menu.length > 0) {
						this.show();
						this.selected = 0;
						this.menu.forEach(this.addMenuItem.bind(this))
					}
				}
			},

			addMenuItem: function (m, indx) {
				var newElement = $('<div class="' + (indx == this.selected ? 'selected' : '') + '" data=id="' + m.id + '">' + m.label + '</div>');
				//debugger;
				var self = this;
				$(newElement).on("click", function () {
					console.log("offset",window.afterKeySelection);
					//$(".token-editor").focus();
					var range = document.createRange();
					range.setStart(afterKeySelection.anchorNode, window.afterKeySelection.anchorOffset);
					range.setEnd(afterKeySelection.focusNode, window.afterKeySelection.focusOffset);
					var sel = window.getSelection();
					sel.removeAllRanges();
					sel.addRange(range);

					self.selected = indx;
					console.log(self.selected, "clicked");
					self.onSelect.call(self);
					debugger;
					
					//try {
					setTimeout(function () {
						var s = window.tokenEditor.getSelection();
						window.tokenEditor.setSelection(s.start , s.end +1);
					}, 0);


					//	//// Create the key press event.
					//	////var pressEvent = document.createEvent('KeyboardEvent');
					//	////pressEvent.initKeyEvent("keypress", true, true, window,false, false, false, false,0, 16/*char.charCodeAt(0)*/);
					//	//new KeyboardEvent("keypress", {
					//	//	bubbles: true,
					//	//	cancelable: true,
					//	//	//char: "Q",
					//	//	key: "Shift",
					//	//	shiftKey: true,
					//	//	keyCode: 16
					//	//});
					//	//var input = window.tokenEditor; // Get the element where you want to press.

					//	//input.dispatchEvent(pressEvent); // Press the key.
					//}
					//catch (e) {
					//	console.log(e);
					//}

				});
				this.$el.append(newElement)
			},

			_score: function (str, term) {
				if (typeof LiquidMetal === 'undefined' && !this._noScoreWarning) {
					this._noScoreWarning = true;
					console.warn('TokenEditor: cannot score auto complete results; LiquidMetal plugin is missing.');
					return 1;
				}
				else {
					return LiquidMetal.score(str, term)
				}
			},

			_scoreItem: function (m, word) {
				var scores = []

				scores.push(this._score(m.label, word))

				// simple string hint
				if (m.hint && typeof m.hint == 'string')
					scores.push(this._score(m.hint, word))

				// array of hints
				if (m.hint && Array.isArray(m.hint))
					m.hint.forEach(function (str) {
						scores.push(this._score(str, word))
					})

				return scores.sort().pop() // return the highest score
			},

			menuFor: function (word) {
				var menu = [];


				var max = tagStart(word);

				word = word.substr(max);
				if (this.options.items)
					this.options.items.forEach(function (m) {

						var score = this._scoreItem(m, word);

						if (score >= this.options.minScore) {

							m.score = score;

							menu.push(m)
						}
					}.bind(this))

				_.sortBy(menu, function (m) { return m.score })

				return this.menu = menu;
			},

			show: function () {

				if (this.isShowing) return;

				this.isShowing = true
				this.el.classList.add('show')
				this.bindKeyboardEvents();
				this.position.refresh();
			},

			hide: function () {
				//debugger;
				this.isShowing = false;
				this.el.classList.remove('show')
				this.unbindKeyboardEvents();
				this.position.sleep();
			}

		})

	});
	/*
		Token Editor 0.2.0
		
		A basic text editor with tokens that are used via auto-complete.
		Tokens can not be modified by the keyboard but appear as "objects" within
		the text box.
		
		This plugin merges the idea of a "tag list" and "@mention" auto-complete.
		
		http://kjantzer.github.io/backbone-token-editor/
		
		@author Kevin Jantzer, Blackstone Audio Inc.
		@since 2015-08-24
		
		@DEPENDENCIES
		[Bullseye](https://github.com/bevacqua/bullseye)
		
		TODO:
		- `&nbsp;` appears sometimes when typing after a token
		- maybe remove need for Backbone.subviews?
		- with multiLines:false, think about adding styles and code to make it perform more like an input
		
	*/
	define('token-editor', ['auto-complete'], function (AutoCompleteView) {

		return Backbone.View.extend({

			className: 'token-editor',

			_defaultOptions: {
				className: '',
				value: '',				// html string or JSON format,
				autoComplete: {},		// options for auto complete
				multiLines: true,
				allowPaste: false,
				allowStyling: false,	// bold/italics keyboard shorcuts
				editing: false, 		// set to true if you want to be in edit mode upon init
				dblClickToEdit: true
			},

			events: {
				'dblclick': 'onDblClick',
				'click': 'onClick',
				'blur': 'onBlur',
				'keydown': 'onKeydown',
				'keyup': 'onKeyup',
				'keypress': 'onKeypress',
				'paste': 'onPaste'
			},

			initialize: function () {

				window.tokenEditor = this; // TEMP

				this.options = _.extend({}, this._defaultOptions, this.options || {});
				this.history = [];
				this.historyAt = 0;

				if (this.options.className)
					this.el.classList.add(this.options.className)

				var autoCompleteOptions = this.options.autoComplete;
				autoCompleteOptions.target = this.el;

				this.subview('auto-complete') || this.subview('auto-complete', new AutoCompleteView(autoCompleteOptions))
				this.listenTo(this.subview('auto-complete'), 'select', this.onAutoCompleteSelect)

				if (this.options.items)
					this.setAutoCompleteItems(this.options.items)

				this.setValue()
				this.markHistory();

				if (this.options.editing)
					this.edit();
			},

			isEditing: function () {
				return this.el.contentEditable == 'true'
			},

			edit: function (doEdit) {
				this.el.contentEditable = doEdit !== false
			},

			render: function () {

				this.delegateEvents();

				return this;
			},

			setValue: function (val) {

				if (arguments.length == 0)
					val = this.options.value;
				else
					this.options.value = val;

				var html = typeof val == 'string' ? val : this.jsonToHTML(val)

				this.el.innerHTML = html;

				html ? this.el.classList.remove('empty') : this.el.classList.add('empty')

				this.endWithBrTag();
			},

			// sets the items available in 'auto complete'
			setAutoCompleteItems: function (items) {
				this.items = items;
				this.subview('auto-complete').setItems(items);
			},

			// when a users selects an 'auto complete' item
			onAutoCompleteSelect: function (data, autoComplete) {
				autoComplete.hide();
				this.replaceWithToken(data)
			},

			onDblClick: function () {
				if (this.options.dblClickToEdit == true && !this.isEditing()) {
					this.edit(true)
					this.focusEnd();
				}
			},

			// when clicked somewhere else in the editor, hide auto complete
			onClick: function () { this.subview('auto-complete').hide(); },
			onBlur: function (e, f, g) {
				var self = this;
				setTimeout(function () {
					self.subview('auto-complete').hide();
					self.trigger('blur', self);
				},500);
			},

			makeToken: function (d) {
				var node = document.createElement('span');
				node.contentEditable = false;
				node.classList.add('token');

				_.each(d.attrs, function (val, key) {
					node.setAttribute('data-' + key, val);
				})

				var label = document.createElement('span');
				label.innerHTML = d.label;
				node.appendChild(label)

				return node.outerHTML;

				return '<span contenteditable=false class="token" data-id="' + d.id + '"><span>' + d.label + '</span></span>';
			},

			insertToken: function (d) {
				this.insertHTML(this.makeToken(d))
			},

			replaceWithToken: function (token) {


				clearTimeout(this.historyTimeout)
				
				var sel = window.getSelection();
				var range = sel.getRangeAt(0);
				var text = range.endContainer.textContent.slice(0, range.endOffset);
				//var lastSpace = text.lastIndexOf(' ') > -1 ? text.lastIndexOf(' ') : text.lastIndexOf(' ');
				//debugger;
				var lastSpace = tagStart(text)-1;
				word = lastSpace > -1 ? text.slice(lastSpace + 1) : text;

				// delete the word the user was typing so we can replace it with a token
				range.setStart(range.endContainer, lastSpace + 1);
				range.deleteContents();

				this.insertToken(token);
			},

			currentWord: function () {

				var sel = window.getSelection(),
					range = sel.getRangeAt(0);

				if (range.endContainer == this.el
				|| !range.endContainer.textContent) return;

				var text = range.endContainer.textContent.slice(0, range.endOffset),
					lastSpace = text.lastIndexOf(' ') > -1 ? text.lastIndexOf(' ') : text.lastIndexOf(' ');
				word = lastSpace > -1 ? text.slice(lastSpace + 1) : text;

				//console.log('current word: ', word);
				return word;
			},

			onPaste: function (e) {
				if (this.options.allowPaste != true) {
					e.preventDefault(); // disable pasting so we dont have to do style cleanup
					return false;
				} else {
					this.markHistoryIn(0);
				}
			},

			onKeydown: function (e) {

				if (e.which === 27) { // esc
					this.trigger('cancel', this)
					return;
				}

				// disable style commands like bold an italic
				if (this.metaKey() && (e.keyCode === 66 /* bold */ || e.keyCode === 73 /* italics */)) {

					if (this.options.allowStyling !== true)
						return false;
					else
						this.markHistoryIn(0);
				}

				// override undo/redo for our own built in history manager
				if (this.metaKey() && e.keyCode === 90) { // ctrl/cmd + z
					e.shiftKey ? this.redo() : this.undo()
					return false;
				}

				// on enter, force `<br>` tags instead of <div> or <p>
				if (e.keyCode === 13) {

					if (this.options.multiLines != true) return false;

					// if at the end of editor, a trailing <br> is needed to make the cursor jump to the next line
					if (this.getSelection().start >= this.length())
						document.execCommand('insertHTML', false, '<br class="newline">'/*<br>'*/);
					else
						document.execCommand('insertHTML', false, '<br class="newline">');

					this.markHistoryIn(0);

					return false;
				}
			},

			onKeyup: function (e) {

				// re-render auto-complete with the current word
				_.defer(function () {
					this.subview('auto-complete').render(this.currentWord())
				}.bind(this))

				// backspace				
				if (e.which == 8){
					this.markHistoryIn(500);
				}

				// make sure we end with a `<br>` tag.
				clearTimeout(this.keyupTimeout)
				this.keyupTimeout = setTimeout(this.endWithBrTag.bind(this), 300);

				var ws = window.getSelection();
				window.afterKeySelection = {
					anchorNode : ws.anchorNode,
					anchorOffset: ws.anchorOffset,
					focusNode: ws.focusNode,
					focusOffset: ws.focusOffset
				};
			},

			onKeypress: function (e) {
				this.markHistoryIn(500);
			},

			endWithBrTag: function () {
				
				// dont do this if auto complete showing, cause when calling `replaceWithToken`;
				// it would replace more than the word if 300ms passed before selecting
				if (this.subview('auto-complete').isShowing) return;

				if (!this.el.innerHTML.match(/<br>$/)) {

					if (!this.isInFocus())
						this.focusEnd();

					var sel = window.getSelection();

					// no selection after telling to focus? then the editor is not in the DOM
					if (sel.type == 'None') {
						//console.log("short-circuit");
						this.el.appendChild(document.createElement('br'))
						return;
					}

					var range = sel.getRangeAt(0);
					var frag = document.createDocumentFragment()
					var br = frag.appendChild(document.createElement('br'));
					//console.log("adding-br");

					//document.execCommand('insertHTML', false, frag);
					this.el.appendChild(frag)

					// this breaks in Safari....
					try{
						range = range.cloneRange();
						range.setStartBefore(br);
						range.collapse(true);
						sel.removeAllRanges();
						sel.addRange(range);
						//var innerText = $(this.el).clone().children().each(function () { return $(this).html("|"); }).end().text();
						//console.log(innerText);

					} catch (e) {
						console.error(e);
					}
				} else {
					//var sel = window.getSelection();
					//var range = sel.getRangeAt(0);
					//var innerText = $(this.el).clone().children().each(function () { return $(this).html("|"); }).end().text();
					//var len = innerText.length+1;
					//if (range.startOffset == range.endOffset && range.endOffset >= len) {
					//	range.setEnd(this.el, len);
					//	range.setStart(this.el, len);
					//	range.collapse(true);
					//	sel.removeAllRanges();
					//	sel.addRange(range);
					//	console.log("br-adj");
					//}

					//console.log("br-exists");
					//var selection = window.getSelection();
					//var selection = window.getSelection();
					//if (selection.rangeCount > 0) {
					//	range = selection.getRangeAt(0);
					//	var clonedSelection = range.cloneContents();
					//	var div = document.createElement('div');
					//	div.appendChild(clonedSelection);
					//	console.log(div.innerHTML)
					//}
				}

			},

			insertHTML: function (html) {

				if (!this.isInFocus())
					this.focusEnd();

				// http://stackoverflow.com/a/6691294/484780
				sel = window.getSelection();

				if (sel.getRangeAt && sel.rangeCount) {
					range = sel.getRangeAt(0);
					range.deleteContents();

					var el = document.createElement("div");
					el.innerHTML = html;

					var frag = document.createDocumentFragment(), node, lastNode;

					while ((node = el.firstChild)) {
						lastNode = frag.appendChild(node);
					}

					range.insertNode(frag);

					// Preserve the selection
					if (lastNode) {
						range = range.cloneRange();
						range.setStartAfter(lastNode);
						range.collapse(true);
						sel.removeAllRanges();
						sel.addRange(range);
					}

					this.markHistory();
				}

			},

			length: function () {
				console.log("lengths", this.el.innerText.trim().length, this.el.innerText.trim().replace(/\n/g, '').length);
				return this.el.innerText.trim().replace(/\n/g, '').length;
			},

			isInFocus: function () {
				return document.activeElement == this.el
			},

			// focuses editor and sets caret position
			focus: function (atChar) {
				if (atChar === undefined || atChar < 0 || atChar > this.length())
					atChar = 0;

				this.setSelection(atChar, atChar);
			},

			// focuses editor at the end
			focusEnd: function () {
				this.focus(this.length())
			},

			selectAll: function () { this.setSelection(0, this.length()) },

			jsonToHTML: function (json) {
				var self = this;
				var lines = _.map(json, function (row) {
					return _.reduce(row, function (str, d) {
						if (typeof d == 'string')
							return str + d
						else if (d.label !== undefined)
							return str + self.makeToken(d)

							// legacy support
						else
							return str + self._objectTextareaObjectToHTML(d)
					}, '')
				})
				return lines.join('<br class="newline">');
			},

			// legacy support
			_objectTextareaObjectToHTML: function (d) {
				if (d.type == 'text')
					return d.data.text;

				var attrs = _.clone(d.data);
				var label = d.data.text; delete attrs.text;

				return this.makeToken({ label: label, attrs: attrs })
			},

			toHTML: function () {
				return this.el.innerHTML.replace(/<br>$/, '');
			},

			toString: function (lineSeparator) {
				lineSeparator = lineSeparator || "\n";
				var html = _.stripTags(this.toHTML().replace(/<br class="newline">/g, "||"))
				return html.replace(/\|\|/g, lineSeparator)
			},

			// creates a JSON structure of the editor content
			toJSON: function () {

				var html = this.toHTML();

				if (!html) return [];

				// split each row by the `<br>` tag
				var json = html.split('<br class="newline">');

				// covert each row to array of strings and objects 
				json = _.map(json, function (str) {

					// make a temp DOM element for navigating through child nodes
					var div = document.createElement('div')
					div.innerHTML = str;

					// row data
					var row = [];

					// make each node an object
					_.each(div.childNodes, function (node) {

						// simple string of text
						if (!node.tagName)
							row.push(node.textContent)

							// spans are 'tokens', so make them an {}
						else if (node.tagName == 'SPAN') {
							row.push({
								label: node.textContent,
								attrs: _.clone(node.dataset)
							})
						}

					})

					return row;

				})

				return json;
			},

			// Legacy support until code that relies on old objectTextarea format is updated
			toObjectTextarea: function () {
				var json = this.toJSON();

				return _.map(json, function (row) {
					return _.map(row, function (d) {

						if (typeof d == 'string') {
							return { type: "text", data: { text: d } }
						} else {
							var attrs = d.attrs;
							attrs.text = d.label;
							return { type: "bubble", data: attrs }
						}

					})
				})
			},

			setSelection: function (start, end) {

				var range = document.createRange(),
					count = 0, startNode, endNode;

				_.each(this.el.childNodes, function (node, indx) {

					var len = (node.innerText ? node.innerText.length : node.length) || 0;

					count = count + len;

					//console.log(count, len);

					// found start of selection
					if ((count > start || (count == start && len == 0)) && !startNode) {

						startNode = node;
						range.setStart(node, node.tagName ? 0 : start - (count - len))

					}

					if ((count > end || (count == end && len == 0)) && !endNode) {

						endNode = node;

						if (node.tagName && len > 0)
							if (node.nextSibling)
								range.setEnd(node.nextSibling, 0)
							else
								range.setEnd(node, 0)
						else
							range.setEnd(node, end - (count - len))
					}

				})

				this.el.focus();

				var sel = window.getSelection();
				sel.removeAllRanges();
				sel.addRange(range);

				return;

				// http://stackoverflow.com/a/16100733/484780
			},

			getSelection: function () {

				var sel = window.getSelection();

				if (sel.type == 'None')
					return {
						start: this.length(),
						end: this.length()
					}

				var range = sel.getRangeAt(0);

				var preSelectionRange = range.cloneRange();
				preSelectionRange.selectNodeContents(this.el);
				preSelectionRange.setEnd(range.startContainer, range.startOffset);
				var start = preSelectionRange.toString().length;

				return {
					start: start,
					end: start + range.toString().length
				};
			},

			metaKey: function (e) {
				e = e || event;
				return e && (e.ctrlKey || e.altKey || e.metaKey);
			},

			markHistory: function () {
				// splices history at current history index (and removes all history after current index)
				this.history.splice(this.historyAt + 1, Number.MAX_VALUE, {
					caret: this.getSelection(),
					content: this.el.innerHTML
				})

				this.historyAt = this.history.length - 1;
			},

			markHistoryIn: function (ms) {
				clearTimeout(this.historyTimeout)
				this.historyTimeout = setTimeout(this.markHistory.bind(this), ms || 0);
			},

			undo: function () {
				if (this.historyAt <= 0) return;
				this.applyHistory(this.history[--this.historyAt])
			},

			redo: function () {
				if (this.historyAt >= this.history.length - 1) return;
				this.applyHistory(this.history[++this.historyAt])
			},

			applyHistory: function (hist) {
				this.el.innerHTML = hist.content;
				this.setSelection(hist.caret.start, hist.caret.end)
			},

		})

	});

})();
//# sourceMappingURL=token-editor.js.map