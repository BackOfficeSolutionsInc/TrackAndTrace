(function(n){n.fn.autoResize=function(t){var i=n.extend({onResize:function(){},animate:!1,animateDuration:150,animateCallback:function(){},extraSpace:0,limit:1e3,useOriginalHeight:!1},t),u,r;return this.destroyList=[],u=this,r=null,this.filter("textarea").each(function(){var t=n(this).css({resize:"none","overflow-y":"hidden"}),c=i.useOriginalHeight?t.height():0,e=function(){var f={},i;return n.each(["height","width","lineHeight","textDecoration","letterSpacing"],function(n,i){f[i]=t.css(i)}),i=t.clone().removeAttr("id").removeAttr("name").css({position:"absolute",top:0,left:-9999}).css(f).attr("tabIndex","-1").insertBefore(t),r!=null&&n(r).remove(),r=i,u.destroyList.push(i),i}(),o=null,f=function(){var f={},r,u;if(n.each(["height","width","lineHeight","textDecoration","letterSpacing"],function(n,i){f[i]=t.css(i)}),e.css(f),e.height(0).val(n(this).val()).scrollTop(1e4),r=Math.max(e.scrollTop(),c)+i.extraSpace,u=n(this).add(e),o!==r){if(o=r,r>=i.limit){n(this).css("overflow-y","");return}i.onResize.call(this);r=Math.max(20,r);i.animate&&t.css("display")==="block"?u.stop().animate({height:r},i.animateDuration,i.animateCallback):u.height(r)}},s,h;t.unbind(".dynSiz").bind("keyup.dynSiz",f).bind("keydown.dynSiz",f).bind("change.dynSiz",f);s=function(){f.call(t)};n(window).bind("resize.dynSiz",function(){clearTimeout(h);h=setTimeout(s,100)});setTimeout(function(){f.call(t)},1)}),this.destroy=function(){for(var t=0;t<this.destroyList.length;t++)n(this.destroyList[t]).remove();this.destroyList=[]},this}})(jQuery);